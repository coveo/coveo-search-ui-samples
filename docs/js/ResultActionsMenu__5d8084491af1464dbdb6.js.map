{"version":3,"sources":["./src/ui/ResultActions/ResultActionsMenu.ts","./sass/_ResultActionsMenu.scss"],"names":[],"mappings":"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","file":"ResultActionsMenu__5d8084491af1464dbdb6.js","sourcesContent":["import { Component } from '../Base/Component';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\nimport { $$ } from '../../utils/Dom';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Assert } from '../../misc/Assert';\nimport { Initialization } from '../Base/Initialization';\nimport { forEach } from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\nimport 'styling/_ResultActionsMenu';\n\nexport interface IResultActionsMenuOptions {\n  openOnMouseOver?: boolean;\n}\n\n/**\n * The _ResultActionsMenu_ component adds a floating result action menu, meant to be used inside result templates (see [Result Templates](https://docs.coveo.com/en/413/javascript-search-framework/result-templates)).\n * It is designed to contain other components that can execute actions related to the result,\n * typically the [Quickview]{@link Quickview} and AttachToCase components, available in the Coveo for Salesforce and Coveo for Dynamics integrations.\n *\n * ```html\n * <script type=\"text/html\" class=\"result-template\" [...]\n *   <div class=\"coveo-result-frame\">\n *     <div class=\"CoveoResultActionsMenu\">\n *       <div class=\"CoveoQuickview\"></div>\n *     </div>\n *   [...]\n * </script>\n * ```\n */\nexport class ResultActionsMenu extends Component {\n  static ID = 'ResultActionsMenu';\n\n  static doExport = () => {\n    exportGlobally({\n      ResultActionsMenu: ResultActionsMenu\n    });\n  };\n\n  static readonly SHOW_CLASS: string = 'coveo-menu-opened';\n\n  /**\n   * @componentOptions\n   */\n  static options: IResultActionsMenuOptions = {\n    /**\n     * Specifies whether the menu should open when the user hovers over the result.\n     *\n     * When set to false, the menu opens only when clicking on the result.\n     *\n     * Default value is `true`.\n     */\n    openOnMouseOver: ComponentOptions.buildBooleanOption({ defaultValue: true })\n  };\n\n  /**\n   * The rendered result that contains this menu.\n   */\n  parentResult: HTMLElement;\n\n  /**\n   * A list containing menu items for this menu.\n   */\n  menuItems: HTMLElement[];\n\n  /**\n   * Creates a new `ResultActionsMenu` component.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the `ResultActionsMenu` component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(\n    public element: HTMLElement,\n    public options: IResultActionsMenuOptions,\n    public bindings?: IResultsComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, ResultActionsMenu.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, ResultActionsMenu, options);\n\n    this.initializeParentResult();\n    this.bindEvents();\n\n    this.buildMenuItems();\n  }\n\n  /**\n   * Shows the floating menu.\n   */\n  public show() {\n    $$(this.element).addClass(ResultActionsMenu.SHOW_CLASS);\n  }\n\n  /**\n   * Hides the floating menu.\n   */\n  public hide() {\n    $$(this.element).removeClass(ResultActionsMenu.SHOW_CLASS);\n  }\n\n  private initializeParentResult() {\n    // Find the result containing this ResultActionsMenu\n    this.parentResult = $$(this.element).closest('CoveoResult');\n    Assert.check(this.parentResult !== undefined, 'ResultActionsMenu needs to be a child of a Result');\n\n    $$(this.parentResult).addClass('coveo-clickable');\n  }\n\n  private bindEvents() {\n    $$(this.parentResult).on('click', () => this.show());\n\n    $$(this.parentResult).on('mouseleave', () => this.hide());\n    if (this.options.openOnMouseOver) {\n      $$(this.parentResult).on('mouseenter', () => this.show());\n    }\n  }\n\n  private buildMenuItems() {\n    this.menuItems = [];\n    forEach($$(this.element).children(), (elem: HTMLElement) => {\n      this.menuItems.push(elem);\n      $$(elem).addClass('coveo-result-actions-menu-menu-item');\n    });\n  }\n}\n\nInitialization.registerAutoCreateComponent(ResultActionsMenu);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultActions/ResultActionsMenu.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultActionsMenu.scss\n// module id = 481\n// module chunks = 63 77"],"sourceRoot":""}