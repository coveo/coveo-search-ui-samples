webpackJsonpCoveo__temporary([20],{139:function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),o(435);var s=o(0),i=o(15),r=o(10),a=o(99),u=o(32),l=o(3),c=o(5),p=o(16),h=o(12),d=o(8),y=o(2),v=o(20),f=o(14),m=o(13),L=o(4),b=o(9),g=o(6),C=o(7),R=o(1),S=o(436);t.defaultLayout="list";var A=function(e){function t(o,n,s){var a=e.call(this,o,t.ID,s)||this;return a.element=o,a.options=n,a.options=C.ComponentOptions.initComponentOptions(o,t,n),a.currentActiveLayouts={},a.bind.onQueryState(p.MODEL_EVENTS.CHANGE_ONE,h.QUERY_STATE_ATTRIBUTES.LAYOUT,a.handleQueryStateChanged.bind(a)),a.bind.onRootElement(r.QueryEvents.querySuccess,function(e){return a.handleQuerySuccess(e)}),a.bind.onRootElement(r.QueryEvents.queryError,function(e){return a.handleQueryError(e)}),a.resultLayoutSection=y.$$(a.element).closest(".coveo-result-layout-section"),a.bind.oneRootElement(i.InitializationEvents.afterComponentsInitialization,function(){return a.populate()}),a.bind.oneRootElement(i.InitializationEvents.afterInitialization,function(){return a.handleQueryStateChanged()}),S.ResponsiveResultLayout.init(a.root,a,{}),a}return n(t,e),Object.defineProperty(t.prototype,"activeLayouts",{get:function(){return this.currentActiveLayouts},enumerable:!0,configurable:!0}),t.prototype.changeLayout=function(e){if(c.Assert.check(this.isLayoutDisplayedByButton(e),"Layout not available or invalid"),e!==this.currentLayout||""===this.getModelValue()){this.setModelValue(e);var t=this.queryController.getLastResults();this.setLayout(e,t),t?this.usageAnalytics.logCustomEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:e},this.element):(this.usageAnalytics.logSearchEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:e}),this.queryController.firstQuery||this.queryController.executeQuery())}},t.prototype.getCurrentLayout=function(){return this.currentLayout},t.prototype.disableLayouts=function(e){var t=this;if(L.Utils.isNonEmptyArray(e)){s.each(e,function(e){return t.disableLayout(e)});var o=s.difference(s.keys(this.currentActiveLayouts),e);if(s.isEmpty(o)){this.logger.error("Cannot disable the last valid layout ... Re-enabling the first one possible");var n=s.keys(this.currentActiveLayouts)[0];this.enableLayout(n),this.setLayout(n)}else{var i=s.contains(o,this.currentLayout)?this.currentLayout:o[0];this.changeLayout(i)}}},t.prototype.enableLayouts=function(e){var t=this;s.each(e,function(e){t.enableLayout(e)})},t.prototype.disableLayout=function(e){this.isLayoutDisplayedByButton(e)&&this.hideButton(e)},t.prototype.enableLayout=function(e){var t=this.activeResultLists;s.find(t,function(t){return t.options.layout==e})&&this.isLayoutDisplayedByButton(e)&&(this.showButton(e),this.updateSelectorAppearance())},Object.defineProperty(t.prototype,"resultLists",{get:function(){return this.searchInterface.getComponents("ResultList")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeResultLists",{get:function(){return s.filter(this.resultLists,function(e){return!e.disabled})},enumerable:!0,configurable:!0}),t.prototype.hideButton=function(e){if(this.isLayoutDisplayedByButton(e)){var t=this.currentActiveLayouts[e].button;y.$$(t.el).addClass("coveo-hidden"),t.visible=!1,this.updateSelectorAppearance()}},t.prototype.showButton=function(e){if(this.isLayoutDisplayedByButton(e)){var t=this.currentActiveLayouts[e].button;y.$$(t.el).removeClass("coveo-hidden"),t.visible=!0}},t.prototype.setLayout=function(e,t){e&&(this.currentLayout&&y.$$(this.currentActiveLayouts[this.currentLayout].button.el).removeClass("coveo-selected"),y.$$(this.currentActiveLayouts[e].button.el).addClass("coveo-selected"),this.currentLayout=e,y.$$(this.element).trigger(u.ResultListEvents.changeLayout,{layout:e,results:t}))},t.prototype.handleQuerySuccess=function(e){this.hasNoResults=0==e.results.results.length,this.shouldShowSelector()?this.show():this.hide()},t.prototype.handleQueryStateChanged=function(e){var t=this.getModelValue(),o=s.find(s.keys(this.currentActiveLayouts),function(e){return e===t});void 0!==o?this.setLayout(o):this.setLayout(s.keys(this.currentActiveLayouts)[0])},t.prototype.handleQueryError=function(e){this.hasNoResults=!0,this.hide()},t.prototype.updateSelectorAppearance=function(){this.shouldShowSelector()?this.show():this.hide()},t.prototype.populate=function(){var e=this,o={layouts:[]};y.$$(this.root).trigger(a.ResultLayoutEvents.populateResultLayout,o);var n=s.uniq(o.layouts.map(function(e){return e.toLowerCase()}));s.each(n,function(e){return c.Assert.check(s.contains(t.validLayouts,e),"Invalid layout")}),s.isEmpty(n)||(s.each(n,function(t){return e.addButton(t)}),this.shouldShowSelector()||this.hide())},t.prototype.addButton=function(e){var t=this,o=y.$$("span",{className:"coveo-result-layout-selector",tabindex:0},y.$$("span",{className:"coveo-result-layout-selector-caption"},d.l(e))),n=y.$$("span",{className:"coveo-icon coveo-"+e+"-layout-icon"},m.SVGIcons.icons[e+"Layout"]);f.SVGDom.addClassToSVGInContainer(n.el,"coveo-"+e+"-svg"),o.prepend(n.el),e===this.currentLayout&&o.addClass("coveo-selected");var s=function(){return t.changeLayout(e)};o.on("click",s),o.on("keyup",v.KeyboardUtils.keypressAction(v.KEYBOARD.ENTER,s)),y.$$(this.element).append(o.el),this.currentActiveLayouts[e]={button:{visible:!0,el:o.el},enabled:!0}},t.prototype.hide=function(){var e=this.resultLayoutSection||this.element;y.$$(e).addClass("coveo-result-layout-hidden")},t.prototype.show=function(){var e=this.resultLayoutSection||this.element;y.$$(e).removeClass("coveo-result-layout-hidden")},t.prototype.getModelValue=function(){return this.queryStateModel.get(h.QueryStateModel.attributesEnum.layout)},t.prototype.setModelValue=function(e){this.queryStateModel.set(h.QueryStateModel.attributesEnum.layout,e)},t.prototype.shouldShowSelector=function(){return s.keys(this.currentActiveLayouts).length>1&&s.filter(this.currentActiveLayouts,function(e){return e.button.visible}).length>1&&!this.hasNoResults},t.prototype.isLayoutDisplayedByButton=function(e){return s.contains(s.keys(this.currentActiveLayouts),e)},t.ID="ResultLayoutSelector",t.aliases=["ResultLayout"],t.doExport=function(){l.exportGlobally({ResultLayoutSelector:t,ResultLayout:t})},t.validLayouts=["list","card","table"],t.options={mobileLayouts:C.ComponentOptions.buildListOption({defaultValue:["card","table"]}),tabletLayouts:C.ComponentOptions.buildListOption({defaultValue:["list","card","table"]}),desktopLayouts:C.ComponentOptions.buildListOption({defaultValue:["list","card","table"]})},t}(g.Component);t.ResultLayoutSelector=A,R.Initialization.registerAutoCreateComponent(A)},14:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),s=function(){function e(){}return e.addClassToSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",""+e.getClass(n)+o)},e.removeClassFromSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",e.getClass(n).replace(o,""))},e.addStyleToSVGInContainer=function(e,t){var o=e.querySelector("svg");n.each(t,function(e,t){o.style[t]=e})},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=s},435:function(e,t){},436:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),s=o(11),i=o(2),r=o(6),a=o(139),u=o(17),l=o(77),c=function(){function e(e,t,o,n){this.coveoRoot=e,this.ID=t,this.searchInterface=r.Component.get(this.coveoRoot.el,u.SearchInterface,!1)}return e.init=function(t,o,n){if(!i.$$(t).find("."+r.Component.computeCssClassName(a.ResultLayoutSelector))){return void new s.Logger("ResponsiveResultLayout").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}l.ResponsiveComponentsManager.register(e,i.$$(t),a.ResultLayoutSelector.ID,o,n)},e.prototype.registerComponent=function(e){return e instanceof a.ResultLayoutSelector&&(this.resultLayout=e,!0)},e.prototype.handleResizeEvent=function(){this.needSmallMode()?this.enableAndDisableLayouts(this.resultLayout.options.mobileLayouts):this.needMediumMode()?this.enableAndDisableLayouts(this.resultLayout.options.tabletLayouts):this.enableAndDisableLayouts(this.resultLayout.options.desktopLayouts)},e.prototype.enableAndDisableLayouts=function(e){var t=n.difference(a.ResultLayoutSelector.validLayouts,e),o=n.intersection(a.ResultLayoutSelector.validLayouts,e);this.resultLayout.disableLayouts(t),this.resultLayout.enableLayouts(o)},e.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},e.prototype.needMediumMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth()},e}();t.ResponsiveResultLayout=c},77:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),s=o(15),i=o(6),r=o(17),a=o(4),u=o(0),l=o(10),c=o(11),p=o(21),h=function(){function e(t){var o=this;this.disabledComponents=[],this.responsiveComponents=[],this.coveoRoot=t,this.searchInterface=i.Component.get(this.coveoRoot.el,r.SearchInterface,!1),this.dropdownHeadersWrapper=n.$$("div",{className:e.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}),this.searchBoxElement=this.getSearchBoxElement(),this.logger=new c.Logger(this),this.resizeListener=function(){0!=o.coveoRoot.width()?(o.addDropdownHeaderWrapperIfNeeded(),o.shouldSwitchToSmallMode()?o.coveoRoot.addClass("coveo-small-interface"):o.shouldSwitchToSmallMode()||o.coveoRoot.removeClass("coveo-small-interface"),u.each(o.responsiveComponents,function(e){e.handleResizeEvent()})):o.logger.warn("The width of the search interface is 0, cannot dispatch resize events to responsive components. This means that the tabs will not\n        automatically fit in the tab section. Also, the facet and recommendation component will not hide in a menu. Could the search\n        interface display property be none? Could its visibility property be set to hidden? Also, if either of these scenarios happen during\n        loading, it could be the cause of this issue.")},p.DeviceUtils.isMobileDevice()||window.addEventListener("resize",this.resizeListener),this.bindNukeEvents()}return e.register=function(t,o,n,i,r){var p=this;(r.initializationEventRoot||o).on(s.InitializationEvents.afterInitialization,function(){if(p.shouldEnableResponsiveMode(o)){var s=u.find(p.componentManagers,function(e){return o.el==e.coveoRoot.el});if(s||(s=new e(o),p.componentManagers.push(s)),!a.Utils.isNullOrUndefined(r.enableResponsiveMode)&&!r.enableResponsiveMode)return void s.disableComponent(n);p.componentInitializations.push({responsiveComponentsManager:s,arguments:[t,o,n,i,r]})}if(0==--p.remainingComponentInitializations)if(p.instantiateResponsiveComponents(),0==o.width()){var h=new c.Logger("ResponsiveComponentsManager");h.info("Search interface width is 0, cannot dispatch resize events to responsive components. Will try again after first\n          query success."),o.one(l.QueryEvents.querySuccess,function(){p.resizeAllComponentsManager()})}else p.resizeAllComponentsManager()}),this.remainingComponentInitializations++},e.shouldEnableResponsiveMode=function(e){var t=i.Component.get(e.el,r.SearchInterface,!0);return t instanceof r.SearchInterface&&t.options.enableAutomaticResponsiveMode},e.instantiateResponsiveComponents=function(){u.each(this.componentInitializations,function(e){var t=e.responsiveComponentsManager;t.register.apply(t,e.arguments)})},e.resizeAllComponentsManager=function(){u.each(this.componentManagers,function(e){e.resizeListener()})},e.prototype.register=function(e,t,o,n,s){if(!this.isDisabled(o)){if(!this.isActivated(o)){var i=new e(t,o,s);this.isTabs(o)?this.responsiveComponents.push(i):this.responsiveComponents.unshift(i)}u.each(this.responsiveComponents,function(e){null!=e.registerComponent&&e.registerComponent(n)})}},e.prototype.disableComponent=function(e){this.disabledComponents.push(e)},e.prototype.isDisabled=function(e){return-1!=u.indexOf(this.disabledComponents,e)},e.prototype.shouldSwitchToSmallMode=function(){var e=this.needDropdownWrapper(),t=this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();return e||t},e.prototype.needDropdownWrapper=function(){for(var e=0;e<this.responsiveComponents.length;e++){var t=this.responsiveComponents[e];if(t.needDropdownWrapper&&t.needDropdownWrapper())return!0}return!1},e.prototype.addDropdownHeaderWrapperIfNeeded=function(){if(this.needDropdownWrapper()){var e=n.$$(this.coveoRoot).find(".coveo-tab-section");this.searchBoxElement?this.dropdownHeadersWrapper.insertAfter(this.searchBoxElement):e?this.dropdownHeadersWrapper.insertAfter(e):this.coveoRoot.prepend(this.dropdownHeadersWrapper.el)}},e.prototype.isTabs=function(e){return"Tab"==e},e.prototype.isActivated=function(e){return void 0!=u.find(this.responsiveComponents,function(t){return t.ID==e})},e.prototype.getSearchBoxElement=function(){var e=this.coveoRoot.find(".coveo-search-section");return e||this.coveoRoot.find(".CoveoSearchbox")},e.prototype.bindNukeEvents=function(){var t=this;n.$$(this.coveoRoot).on(s.InitializationEvents.nuke,function(){window.removeEventListener("resize",t.resizeListener),e.componentManagers=u.filter(e.componentManagers,function(e){return e.coveoRoot.el!=t.coveoRoot.el})})},e.DROPDOWN_HEADER_WRAPPER_CSS_CLASS="coveo-dropdown-header-wrapper",e.componentManagers=[],e.remainingComponentInitializations=0,e.componentInitializations=[],e}();t.ResponsiveComponentsManager=h}});