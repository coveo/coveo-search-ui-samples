{"version":3,"sources":["./node_modules/coveomagicbox/bin/MagicBox.min.js","./src/ui/Querybox/QueryboxQueryParameters.ts","./src/ui/Querybox/Querybox.ts"],"names":[],"mappings":"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","file":"Querybox__1a4919568d31ada5f0d0.js","sourcesContent":["var Coveo,__extends=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function s(){this.constructor=t}t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)};!function(t){var e,n;e=t.MagicBox||(t.MagicBox={}),n=function(){function i(t,e,n){var s=this;this.expression=e,this.input=n,_.isString(t)?this.value=t:_.isArray(t)&&(this.subResults=t,_.forEach(this.subResults,function(t){t.parent=s}))}return i.prototype.isSuccess=function(){return null!=this.value||null!=this.subResults&&_.all(this.subResults,function(t){return t.isSuccess()})},i.prototype.path=function(t){var e=null!=this.parent&&this.parent!=t?this.parent.path(t):[];return e.push(this),e},i.prototype.findParent=function(e){for(var t=this,n=_.isString(e)?function(t){return e==t.expression.id}:e;null!=t&&!n(t);)t=t.parent;return t},i.prototype.find=function(e){var t=_.isString(e)?function(t){return e==t.expression.id}:e;if(t(this))return this;if(this.subResults)for(var n=0;n<this.subResults.length;n++){var s=this.subResults[n].find(t);if(s)return s}return null},i.prototype.findAll=function(e){var t=[],n=_.isString(e)?function(t){return e==t.expression.id}:e;return n(this)&&t.push(this),this.subResults&&(t=_.reduce(this.subResults,function(t,e){return t.concat(e.findAll(n))},t)),t},i.prototype.resultAt=function(t,e){if(t<0||t>this.getLength())return[];if(null!=e){if(_.isString(e)){if(e==this.expression.id)return[this]}else if(e(this))return[this]}else if(null!=(null==this.value&&null==this.subResults?this.input:this.value))return[this];if(null!=this.subResults){for(var n=[],s=0;s<this.subResults.length;s++){var i=this.subResults[s];if(n=n.concat(i.resultAt(t,e)),(t-=i.getLength())<0)break}return n}return[]},i.prototype.getExpect=function(){return null==this.value&&null==this.subResults?[this]:null!=this.subResults?_.reduce(this.subResults,function(t,e){return t.concat(e.getExpect())},[]):[]},i.prototype.getBestExpect=function(){var t=this.getExpect(),e=(n=_.groupBy(t,function(t){return t.input}))[_.last(_.keys(n).sort(function(t,e){return e.length-t.length}))],n=_.groupBy(e,function(t){return t.expression.id});return _.map(n,function(t){return _.chain(t).map(function(t){return{path:t.path().length,result:t}}).sortBy(\"path\").pluck(\"result\").first().value()})},i.prototype.getHumanReadableExpect=function(){var t=this.getBestExpect(),e=0<t.length?_.last(t).input:\"\";return\"Expected \"+_.map(t,function(t){return t.getHumanReadable()}).join(\" or \")+\" but \"+(0<e.length?JSON.stringify(e[0]):\"end of input\")+\" found.\"},i.prototype.before=function(){if(null==this.parent)return\"\";var t=_.indexOf(this.parent.subResults,this);return this.parent.before()+_.chain(this.parent.subResults).first(t).map(function(t){return t.toString()}).join(\"\").value()},i.prototype.after=function(){if(null==this.parent)return\"\";var t=_.indexOf(this.parent.subResults,this);return _.chain(this.parent.subResults).last(this.parent.subResults.length-t-1).map(function(t){return t.toString()}).join(\"\").value()+this.parent.after()},i.prototype.getLength=function(){return null!=this.value?this.value.length:null!=this.subResults?_.reduce(this.subResults,function(t,e){return t+e.getLength()},0):this.input.length},i.prototype.toHtmlElement=function(){var e=document.createElement(\"span\"),t=null!=this.expression?this.expression.id:null;return null!=t&&e.setAttribute(\"data-id\",t),e.setAttribute(\"data-success\",this.isSuccess().toString()),null!=this.value?(e.appendChild(document.createTextNode(this.value)),e.setAttribute(\"data-value\",this.value)):null!=this.subResults?_.each(this.subResults,function(t){e.appendChild(t.toHtmlElement())}):(e.appendChild(document.createTextNode(this.input)),e.setAttribute(\"data-input\",this.input),e.className=\"magic-box-error\"+(0<this.input.length?\"\":\" magic-box-error-empty\")),e.result=this,e},i.prototype.clean=function(t){if(null!=t||!this.isSuccess()){t=t||_.last(this.getBestExpect()).path(this);var e=_.first(t);if(null!=e){var n=_.indexOf(this.subResults,e),s=-1==n?[]:_.map(_.first(this.subResults,n),function(t){return t.clean()});return s.push(e.clean(_.rest(t))),new i(s,this.expression,this.input)}return new i(null,this.expression,this.input)}return null!=this.value?new i(this.value,this.expression,this.input):null!=this.subResults?new i(_.map(this.subResults,function(t){return t.clean()}),this.expression,this.input):void 0},i.prototype.clone=function(){return null!=this.value?new i(this.value,this.expression,this.input):null!=this.subResults?new i(_.map(this.subResults,function(t){return t.clone()}),this.expression,this.input):new i(null,this.expression,this.input)},i.prototype.toString=function(){return null!=this.value?this.value:null!=this.subResults?_.map(this.subResults,function(t){return t.toString()}).join(\"\"):this.input},i.prototype.getHumanReadable=function(){return this.expression instanceof e.ExpressionConstant?JSON.stringify(this.expression.value):this.expression.id},i}(),e.Result=n}(Coveo||(Coveo={})),function(t){var s,e;s=t.MagicBox||(t.MagicBox={}),e=function(n){function t(t){n.call(this,[t],s.ExpressionEndOfInput,t.input);var e=new s.Result(null,s.ExpressionEndOfInput,t.input.substr(t.getLength()));(e.parent=this).subResults.push(e)}return __extends(t,n),t}(s.Result),s.EndOfInputResult=e}(Coveo||(Coveo={})),function(t){var n,e;n=t.MagicBox||(t.MagicBox={}),e=function(o){function t(t,e,n,s){var i=this;o.call(this,null!=t?[t]:null,e,n),this.result=t,this.expression=e,this.input=n,this.failAttempt=s,_.forEach(this.failAttempt,function(t){t.parent=i})}return __extends(t,o),t.prototype.getExpect=function(){var e=this,t=[];return null!=this.result&&(t=this.result.getExpect()),0<(t=_.reduce(this.failAttempt,function(t,e){return t.concat(e.getExpect())},t)).length&&_.all(t,function(t){return t.input==e.input})?[this]:t},t.prototype.clean=function(t){if(null!=t||!this.isSuccess()){t=_.rest(t||_.last(this.getBestExpect()).path(this));var e=_.first(t);return null==e?new n.Result(null,this.expression,this.input):new n.Result([e.clean(_.rest(t))],this.expression,this.input)}return new n.Result(_.map(this.result.subResults,function(t){return t.clean()}),this.expression,this.input)},t}(n.Result),n.OptionResult=e}(Coveo||(Coveo={})),function(t){var o,e;o=t.MagicBox||(t.MagicBox={}),e=function(i){function t(t,e,n,s){i.call(this,t,e,n),this.results=t,this.expression=e,this.input=n,_.last(t)!=s&&(this.failAttempt=s,null!=this.failAttempt&&(this.failAttempt.parent=this))}return __extends(t,i),t.prototype.getExpect=function(){var t=i.prototype.getExpect.call(this);return null!=this.failAttempt?t.concat(this.failAttempt.getExpect()):t},t.prototype.clean=function(t){if(null!=this.failAttempt&&(null!=t||!this.isSuccess())){t=t||_.last(this.getBestExpect()).path(this);var e=_.first(t);if(null!=e&&e==this.failAttempt){var n=_.last(this.subResults),s=_.map(null!=n&&n.isSuccess()?this.subResults:_.initial(this.subResults),function(t){return t.clean()});return s.push(e.clean(_.rest(t))),new o.Result(s,this.expression,this.input)}}return i.prototype.clean.call(this,t)},t}(o.Result),o.RefResult=e}(Coveo||(Coveo={})),function(t){var i,e;i=t.MagicBox||(t.MagicBox={}),e=function(){function t(t,e){this.value=t,this.id=e}return t.prototype.parse=function(t,e){var n=0==t.indexOf(this.value),s=new i.Result(n?this.value:null,this,t);return n&&e&&t.length>this.value.length?new i.EndOfInputResult(s):s},t.prototype.toString=function(){return this.value},t}(),i.ExpressionConstant=e}(Coveo||(Coveo={})),function(t){(t.MagicBox||(t.MagicBox={})).ExpressionEndOfInput={id:\"end of input\",parse:null}}(Coveo||(Coveo={})),function(t){var e,n;e=t.MagicBox||(t.MagicBox={}),n=function(){function t(t,e,n){this.func=t,this.id=e,this.grammar=n}return t.prototype.parse=function(t,e){return this.func(t,e,this)},t.prototype.toString=function(){return this.id},t}(),e.ExpressionFunction=n}(Coveo||(Coveo={})),function(t){var r,e;r=t.MagicBox||(t.MagicBox={}),e=function(){function t(t,e){if(this.parts=t,this.id=e,0==t.length)throw JSON.stringify(e)+\" should have at least 1 parts\"}return t.prototype.parse=function(t,e){for(var n,s=[],i=t,o=0;o<this.parts.length;o++){if(n=this.parts[o].parse(i,e&&o==this.parts.length-1),s.push(n),!n.isSuccess())break;i=i.substr(n.getLength())}return new r.Result(s,this,t)},t.prototype.toString=function(){return this.id},t}(),r.ExpressionList=e}(Coveo||(Coveo={})),function(t){var o,e;o=t.MagicBox||(t.MagicBox={}),e=function(){function t(t,e){this.parts=t,this.id=e}return t.prototype.parse=function(t,e){for(var n=[],s=0;s<this.parts.length;s++){var i=this.parts[s].parse(t,e);if(i.isSuccess())return new o.OptionResult(i,this,t,n);n.push(i)}return new o.OptionResult(null,this,t,n)},t.prototype.toString=function(){return this.id},t}(),o.ExpressionOptions=e}(Coveo||(Coveo={})),function(t){var p,e;p=t.MagicBox||(t.MagicBox={}),e=function(){function t(t,e,n,s){this.ref=t,this.occurrence=e,this.id=n,this.grammar=s}return t.prototype.parse=function(t,e){var n=this.grammar.getExpression(this.ref);if(null==n)throw\"Expression not found:\"+this.ref;return\"?\"==this.occurrence||null==this.occurrence?this.parseOnce(t,e,n):this.parseMany(t,e,n)},t.prototype.parseOnce=function(t,e,n){var s=n.parse(t,e),i=s.isSuccess();return i||\"?\"!=this.occurrence?new p.RefResult([s],this,t,i?null:s):e?0==t.length?new p.RefResult([],this,t,s):_.all(s.getBestExpect(),function(t){return t.expression==p.ExpressionEndOfInput})?new p.RefResult([new p.Result(null,p.ExpressionEndOfInput,t)],this,t,s):s:new p.RefResult([],this,t,null)},t.prototype.parseMany=function(t,e,n){for(var s,i,o=[],r=t;(i=(s=n.parse(r,!1)).isSuccess())&&(o.push(s),r=r.substr(s.getLength())),i&&s.input!=r;);var u=_.isNumber(this.occurrence)?this.occurrence:\"+\"==this.occurrence?1:0;if(o.length<u)o.push(s);else if(e)if(0<o.length){var a=_.last(o);(s=n.parse(a.input,!0)).isSuccess()?o[o.length-1]=s:(o.push(new p.Result(null,p.ExpressionEndOfInput,a.input.substr(a.getLength()))),s=n.parse(a.input.substr(a.getLength()),!0))}else if(0!=t.length){var l=new p.Result(null,p.ExpressionEndOfInput,t);return new p.RefResult([l],this,t,s)}return new p.RefResult(o,this,t,s)},t.prototype.toString=function(){return this.id},t}(),p.ExpressionRef=e}(Coveo||(Coveo={})),function(t){var i,e;i=t.MagicBox||(t.MagicBox={}),e=function(){function t(t,e,n){this.value=t,this.id=e}return t.prototype.parse=function(t,e){var n=t.match(this.value);null!=n&&0!=n.index&&(n=null);var s=new i.Result(null!=n?n[0]:null,this,t);return s.isSuccess()&&e&&t.length>s.value.length?new i.EndOfInputResult(s):s},t.prototype.toString=function(){return this.id},t}(),i.ExpressionRegExp=e}(Coveo||(Coveo={})),function(t){var u,e;u=t.MagicBox||(t.MagicBox={}),e=function(){function r(t,e){void 0===e&&(e={}),this.expressions={},this.start=new u.ExpressionRef(t,null,\"start\",this),this.addExpressions(e)}return r.prototype.addExpressions=function(t){var n=this;_.each(t,function(t,e){n.addExpression(e,t)})},r.prototype.addExpression=function(t,e){if(t in this.expressions)throw\"Grammar already contain the id:\"+t;this.expressions[t]=r.buildExpression(e,t,this)},r.prototype.getExpression=function(t){return this.expressions[t]},r.prototype.parse=function(t){return this.start.parse(t,!0)},r.buildExpression=function(t,n,s){if(\"undefined\"==typeof t)throw\"Invalid Expression: \"+t;if(_.isString(t))return this.buildStringExpression(t,n,s);if(_.isArray(t))return new u.ExpressionOptions(_.map(t,function(t,e){return new u.ExpressionRef(t,null,n+\"_\"+e,s)}),n);if(_.isRegExp(t))return new u.ExpressionRegExp(t,n,s);if(_.isFunction(t))return new u.ExpressionFunction(t,n,s);throw\"Invalid Expression: \"+t},r.buildStringExpression=function(t,i,o){var e=r.stringMatch(t,r.spliter),n=_.map(e,function(t,e){if(t[1]){var n=t[1],s=t[3]?Number(t[3]):t[2]||null;return new u.ExpressionRef(n,s,i+\"_\"+e,o)}return new u.ExpressionConstant(t[4],i+\"_\"+e)});if(1==n.length){var s=n[0];return s.id=i,s}return new u.ExpressionList(n,i)},r.stringMatch=function(t,e){for(var n,s=[],i=new RegExp(e.source,\"g\");null!==(n=i.exec(t));)s.push(n);return s},r.spliter=/\\[(\\w+)(\\*|\\+|\\?|\\{([1-9][0-9]*)\\})?\\]|(.[^\\[]*)/,r}(),u.Grammar=e}(Coveo||(Coveo={})),function(t){var s,e;s=t.MagicBox||(t.MagicBox={}),e=function(){function t(t,e,n){this.element=t,this.onchange=e,this.magicBox=n,this.hasFocus=!1,this.underlay=document.createElement(\"div\"),this.underlay.className=\"magic-box-underlay\",this.highlightContainer=document.createElement(\"span\"),this.highlightContainer.className=\"magic-box-highlight-container\",this.underlay.appendChild(this.highlightContainer),this.ghostTextContainer=document.createElement(\"span\"),this.ghostTextContainer.className=\"magic-box-ghost-text\",this.underlay.appendChild(this.ghostTextContainer),this.input=s.$$(t).find(\"input\"),this.input?t.insertBefore(this.underlay,this.input):(this.input=document.createElement(\"input\"),t.appendChild(this.underlay),t.appendChild(this.input)),this.input.spellcheck=!1,this.input.setAttribute(\"form\",\"coveo-dummy-form\"),this.input.setAttribute(\"autocomplete\",\"off\"),this.setupHandler()}return t.prototype.updateInput=function(){this.input.value!=this.result.input&&(this.input.value=this.result.input,this.hasFocus&&this.setCursor(this.getValue().length))},t.prototype.updateHighlight=function(){s.$$(this.highlightContainer).empty(),this.highlightContainer.appendChild(this.result.toHtmlElement())},t.prototype.updateWordCompletion=function(){s.$$(this.ghostTextContainer).empty(),null!=this.wordCompletion&&this.ghostTextContainer.appendChild(document.createTextNode(this.wordCompletion.substr(this.result.input.length)))},t.prototype.updateScroll=function(t){var e=this;void 0===t&&(t=!0);var n=function(){e.underlay.clientWidth<e.underlay.scrollWidth&&(e.underlay.style.visibility=\"hidden\",e.underlay.scrollLeft=e.input.scrollLeft,e.underlay.scrollTop=e.input.scrollTop,e.underlay.style.visibility=\"visible\"),e.updateScrollDefer=null,e.hasFocus&&e.updateScroll()};t?null==this.updateScrollDefer&&(this.updateScrollDefer=s.requestAnimationFrame(n)):n()},t.prototype.setResult=function(t,e){this.result=t,this.updateInput(),this.updateHighlight(),_.isUndefined(e)&&null!=this.wordCompletion&&0==this.wordCompletion.indexOf(this.result.input)?this.updateWordCompletion():this.setWordCompletion(e),this.updateScroll()},t.prototype.setWordCompletion=function(t){null!=t&&0!=t.toLowerCase().indexOf(this.result.input.toLowerCase())&&(t=null),this.wordCompletion=t,this.updateWordCompletion(),this.updateScroll()},t.prototype.setCursor=function(t){if(this.input.focus(),this.input.createTextRange){var e=this.input.createTextRange();e.move(\"character\",t),e.select()}else null!=this.input.selectionStart&&(this.input.focus(),this.input.setSelectionRange(t,t))},t.prototype.getCursor=function(){return this.input.selectionStart},t.prototype.setupHandler=function(){var e=this;this.input.onblur=function(){e.hasFocus=!1,setTimeout(function(){e.hasFocus||e.onblur&&e.onblur()},300),e.updateScroll()},this.input.onfocus=function(){e.hasFocus||(e.hasFocus=!0,e.updateScroll(),e.onfocus&&e.onfocus())},this.input.onkeydown=function(t){e.keydown(t)},this.input.onkeyup=function(t){e.keyup(t)},this.input.onclick=function(){e.onchangecursor()},this.input.oncut=function(){setTimeout(function(){e.onInputChange()})},this.input.onpaste=function(){setTimeout(function(){e.onInputChange()})}},t.prototype.focus=function(){var t=this;this.hasFocus=!0,setTimeout(function(){t.input.focus(),t.setCursor(t.getValue().length)})},t.prototype.blur=function(){this.hasFocus&&this.input.blur()},t.prototype.keydown=function(t){var e=this;switch(t.keyCode||t.which){case 9:this.tabPress(),this.magicBox.clearSuggestion();break;default:t.stopPropagation(),null==this.onkeydown||this.onkeydown(t.keyCode||t.which)?s.requestAnimationFrame(function(){e.onInputChange()}):t.preventDefault()}},t.prototype.keyup=function(t){switch(t.keyCode||t.which){case 37:case 39:this.onchangecursor();break;default:null==this.onkeydown||this.onkeyup(t.keyCode||t.which)?this.onInputChange():t.preventDefault()}},t.prototype.tabPress=function(){this.ontabpress&&this.ontabpress(),this.onblur&&this.onblur()},t.prototype.onInputChange=function(){this.result.input!=this.input.value&&this.onchange(this.input.value,!1)},t.prototype.getValue=function(){return this.input.value},t.prototype.getWordCompletion=function(){return this.wordCompletion},t}(),s.InputManager=e}(Coveo||(Coveo={})),function(t){var o,e;o=t.MagicBox||(t.MagicBox={}),e=function(){function t(t,e){var n=this;this.element=t,this.count=1,this.options=_.defaults(e,{selectableClass:\"magic-box-suggestion\",selectedClass:\"magic-box-selected\"}),null==this.options.timeout&&(this.options.timeout=500),this.hasSuggestions=!1,o.$$(this.element).on(\"mouseover\",function(t){n.handleMouseOver(t)}),o.$$(this.element).on(\"mouseout\",function(t){n.handleMouseOut(t)})}return t.prototype.handleMouseOver=function(t){var e=o.$$(t.target),n=e.parents(this.options.selectableClass);e.hasClass(this.options.selectableClass)?this.addSelectedClass(e.el):0<n.length&&this.element.contains(n[0])&&this.addSelectedClass(n[0])},t.prototype.handleMouseOut=function(t){var e=o.$$(t.target),n=e.parents(this.options.selectableClass);if(t.relatedTarget){var s=o.$$(t.relatedTarget).parents(this.options.selectableClass);e.hasClass(this.options.selectedClass)&&!o.$$(t.relatedTarget).hasClass(this.options.selectableClass)?e.removeClass(this.options.selectedClass):0==s.length&&0<n.length&&o.$$(n[0]).removeClass(this.options.selectedClass)}else e.hasClass(this.options.selectedClass)?e.removeClass(this.options.selectedClass):0<n.length&&o.$$(n[0]).removeClass(this.options.selectedClass)},t.prototype.moveDown=function(){var t=this.element.getElementsByClassName(this.options.selectedClass).item(0),e=this.element.getElementsByClassName(this.options.selectableClass),n=-1;if(null!=t){o.$$(t).removeClass(this.options.selectedClass);for(var s=0;s<e.length;s++)if(t==e.item(s)){n=s;break}n=-1==n?0:n+1}else n=0;return null!=(t=e.item(n))&&o.$$(t).addClass(this.options.selectedClass),this.returnMoved(t)},t.prototype.moveUp=function(){var t=this.element.getElementsByClassName(this.options.selectedClass).item(0),e=this.element.getElementsByClassName(this.options.selectableClass),n=-1;if(null!=t){o.$$(t).removeClass(this.options.selectedClass);for(var s=0;s<e.length;s++)if(t==e.item(s)){n=s;break}n=-1==n?e.length-1:n-1}else n=e.length-1;return null!=(t=e.item(n))&&o.$$(t).addClass(this.options.selectedClass),this.returnMoved(t)},t.prototype.select=function(){var t=this.element.getElementsByClassName(this.options.selectedClass).item(0);return null!=t&&o.$$(t).trigger(\"keyboardSelect\"),t},t.prototype.mergeSuggestions=function(s,e){var i,o=this,r=[],u=!0;s=_.compact(s);var a=this.pendingSuggestion=new Promise(function(t,e){_.each(s,function(t){var e=!1;setTimeout(function(){u=!(e=!0)},o.options.timeout),t.then(function(t){!e&&t&&(r=r.concat(t))})});var n=function(){u&&(i&&clearTimeout(i),0==r.length?t([]):a==o.pendingSuggestion||null==o.pendingSuggestion?t(r.sort(function(t,e){return e.index-t.index})):e(\"new request queued\")),u=!1};0==s.length&&n(),null==s&&n(),i=setTimeout(function(){n()},o.options.timeout),Promise.all(s).then(function(){return n()})});a.then(function(t){return e&&e(t),o.updateSuggestions(t),t}).catch(function(){return null})},t.prototype.updateSuggestions=function(t){var i=this;o.$$(this.element).empty(),this.element.className=\"magic-box-suggestions\",_.each(t,function(t){var e=t.dom;if(e){o.$$(e).removeClass(i.options.selectedClass);var n=o.$$(e).find(\".\"+i.options.selectableClass);o.$$(n).removeClass(i.options.selectedClass)}else{if((e=document.createElement(\"div\")).className=\"magic-box-suggestion\",null!=t.html)e.innerHTML=t.html;else if(null!=t.text)e.appendChild(document.createTextNode(t.text));else if(null!=t.separator){e.className=\"magic-box-suggestion-seperator\";var s=document.createElement(\"div\");s.className=\"magic-box-suggestion-seperator-label\",s.appendChild(document.createTextNode(t.separator)),e.appendChild(s)}o.$$(e).on(\"click\",function(){t.onSelect()}),o.$$(e).on(\"keyboardSelect\",function(){t.onSelect()}),o.$$(e).addClass(i.options.selectableClass)}e.suggestion=t,i.element.appendChild(e)}),0<t.length?(o.$$(this.element).addClass(\"magic-box-hasSuggestion\"),this.hasSuggestions=!0):(o.$$(this.element).removeClass(\"magic-box-hasSuggestion\"),this.hasSuggestions=!1)},t.prototype.returnMoved=function(t){if(null!=t){if(t.suggestion)return t.suggestion;if(t[\"no-text-suggestion\"])return null;if(t instanceof HTMLElement)return{text:o.$$(t).text()}}return null},t.prototype.addSelectedClass=function(t){for(var e=this.element.getElementsByClassName(this.options.selectedClass),n=0;n<e.length;n++){var s=e.item(n);o.$$(s).removeClass(this.options.selectedClass)}o.$$(t).addClass(this.options.selectedClass)},t}(),o.SuggestionsManager=e}(Coveo||(Coveo={})),function(t){var s;(function(t){t.highlightText=function(t,e,n,i,o){if(void 0===n&&(n=!1),void 0===i&&(i=\"magic-box-hightlight\"),void 0===o&&(o=\"\"),0==e.length)return t;var s=e.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\"),r=new RegExp(\"(\"+s+\")|(.*?(?=\"+s+\")|.+)\",n?\"gi\":\"g\");return t.replace(r,function(t,e,n){return s=t,'<span class=\"'+(null!=e?i:o)+'\">'+_.escape(s)+\"</span>\";var s})};var e=function(){function r(t){this.el=t}return r.prototype.text=function(t){if(!t)return this.el.innerText||this.el.textContent;null!=this.el.innerText?this.el.innerText=t:null!=this.el.textContent&&(this.el.textContent=t)},r.prototype.nodeListToArray=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t.item(e);return n},r.prototype.empty=function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)},r.prototype.show=function(){this.el.style.display=\"visible\"},r.prototype.hide=function(){this.el.style.display=\"none\"},r.prototype.toggle=function(t){void 0===t?\"visible\"==this.el.style.display?this.hide():this.show():t?this.show():this.hide()},r.prototype.find=function(t){return this.el.querySelector(t)},r.prototype.is=function(t){return this.el.tagName.toLowerCase()==t.toLowerCase()||!(\".\"!=t[0]||!this.hasClass(t.substr(1)))||\"#\"==t[0]&&this.el.getAttribute(\"id\")==t.substr(1)},r.prototype.closest=function(t){for(var e=this.el,n=!1;!n&&(s.$$(e).hasClass(t)&&(n=!0),\"body\"!=e.tagName.toLowerCase())&&null!=e.parentElement;)n||(e=e.parentElement);if(n)return e},r.prototype.parent=function(t){if(null!=this.el.parentElement)return this.traverseAncestorForClass(this.el.parentElement,t)},r.prototype.parents=function(t){for(var e=[],n=this.parent(t);n;)e.push(n),n=new r(n).parent(t);return e},r.prototype.findAll=function(t){return this.nodeListToArray(this.el.querySelectorAll(t))},r.prototype.findClass=function(t){return\"getElementsByClassName\"in this.el?this.nodeListToArray(this.el.getElementsByClassName(t)):this.nodeListToArray(this.el.querySelectorAll(\".\"+t))},r.prototype.findId=function(t){return document.getElementById(t)},r.prototype.addClass=function(t){this.hasClass(t)||(this.el.className?this.el.className+=\" \"+t:this.el.className=t)},r.prototype.removeClass=function(t){this.el.className=this.el.className.replace(new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|\\\\b)\",\"g\"),\"$1\")},r.prototype.toggleClass=function(t,e){e?this.addClass(t):this.removeClass(t)},r.prototype.getClass=function(){return this.el.className.match(r.CLASS_NAME_REGEX)||[]},r.prototype.hasClass=function(t){return _.contains(this.getClass(),t)},r.prototype.detach=function(){this.el.parentElement&&this.el.parentElement.removeChild(this.el)},r.prototype.on=function(t,e){var n=this;if(_.isArray(t))_.each(t,function(t){n.on(t,e)});else{var s=this.getJQuery();if(s)s(this.el).on(t,e);else if(this.el.addEventListener){var i=function(t){e(t,t.detail)};r.handlers.push({eventHandle:e,fn:i}),this.el.addEventListener(t,i,!1)}else this.el.on&&this.el.on(\"on\"+t,e)}},r.prototype.one=function(e,n){var s=this;if(_.isArray(e))_.each(e,function(t){s.one(t,n)});else{var i=function(t){return s.off(e,i),n(t)};this.on(e,i)}},r.prototype.off=function(t,n){var e=this;if(_.isArray(t))_.each(t,function(t){e.off(t,n)});else{var s=this.getJQuery();if(s)s(this.el).off(t,n);else if(this.el.removeEventListener){var i=0,o=_.find(r.handlers,function(t,e){if(t.eventHandle==n)return i=e,!0});o&&(this.el.removeEventListener(t,o.fn,!1),r.handlers.splice(i,1))}else this.el.off&&this.el.off(\"on\"+t,n)}},r.prototype.trigger=function(t,e){var n=this.getJQuery();if(n)n(this.el).trigger(t,e);else if(void 0!==CustomEvent){var s=new CustomEvent(t,{detail:e,bubbles:!0});this.el.dispatchEvent(s)}},r.prototype.isEmpty=function(){return r.ONLY_WHITE_SPACE_REGEX.test(this.el.innerHTML)},r.prototype.isDescendant=function(t){for(var e=this.el.parentNode;null!=e;){if(e==t)return!0;e=e.parentNode}return!1},r.prototype.traverseAncestorForClass=function(t,e){void 0===t&&(t=this.el),0==e.indexOf(\".\")&&(e=e.substr(1));for(var n=!1;!n&&(s.$$(t).hasClass(e)&&(n=!0),\"body\"!=t.tagName.toLowerCase())&&null!=t.parentElement;)n||(t=t.parentElement);if(n)return t},r.prototype.getJQuery=function(){return null!=window.jQuery&&window.jQuery},r.CLASS_NAME_REGEX=/-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g,r.ONLY_WHITE_SPACE_REGEX=/^\\s*$/,r.handlers=[],r}();t.Dom=e})((s=t.MagicBox||(t.MagicBox={})).Utils||(s.Utils={}))}(Coveo||(Coveo={})),function(t){var e;(e=t.MagicBox||(t.MagicBox={})).$$=function(t){return window.Coveo&&window.Coveo.$$?window.Coveo.$$(t):new e.Utils.Dom(t)}}(Coveo||(Coveo={})),function(t){var i;(function(t){function r(e,n,s,t){_.each(t.expressions,function(t){_.contains(e,t)||e.push(t)}),_.each(t.basicExpressions,function(t){_.contains(n,t)||n.push(t)}),_.each(t.grammars,function(t,e){if(e in s){if(!_.isArray(s[e])||!_.isArray(t))throw _.each(t,function(t){s[e].push(t)}),\"Can not merge \"+e+\"(\"+new String(t)+\" => \"+new String(s[e])+\")\";_.each(t,function(t){s[e].push(t)})}else s[e]=t})}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=[],s=[],i={Start:[\"Expressions\",\"Empty\"],Expressions:\"[OptionalSpaces][Expression][ExpressionsList*][OptionalSpaces]\",ExpressionsList:\"[Spaces][Expression]\",Expression:n,BasicExpression:s,OptionalSpaces:/ */,Spaces:/ +/,Empty:/(?!.)/},o=0;o<e.length;o++)r(n,s,i,e[o]),_.each(e[o].include,function(t){_.contains(e,t)||e.push(t)});return n.push(\"BasicExpression\"),{start:\"Start\",expressions:i}}t.Expressions=s,t.ExpressionsGrammar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=s.apply(this,t);return new i.Grammar(n.start,n.expressions)}})((i=t.MagicBox||(t.MagicBox={})).Grammars||(i.Grammars={}))}(Coveo||(Coveo={})),function(t){var r,u;r=t.MagicBox||(t.MagicBox={}),(u=r.Grammars||(r.Grammars={})).notWordStart=\" ()[],$@'\\\"\",u.notInWord=\" ()[],:\",u.Basic={basicExpressions:[\"Word\",\"DoubleQuoted\"],grammars:{DoubleQuoted:'\"[NotDoubleQuote]\"',NotDoubleQuote:/[^\"]*/,SingleQuoted:\"'[NotSingleQuote]'\",NotSingleQuote:/[^']*/,Number:/-?(0|[1-9]\\d*)(\\.\\d+)?/,Word:function(t,e,n){var s=new RegExp(\"[^\"+u.notWordStart.replace(/(.)/g,\"\\\\$1\")+\"][^\"+u.notInWord.replace(/(.)/g,\"\\\\$1\")+\"]*\"),i=t.match(s);null!=i&&0!=i.index&&(i=null);var o=new r.Result(null!=i?i[0]:null,n,t);return o.isSuccess()&&e&&t.length>o.value.length?new r.EndOfInputResult(o):o}}}}(Coveo||(Coveo={})),function(t){var e;((e=t.MagicBox||(t.MagicBox={})).Grammars||(e.Grammars={})).SubExpression={basicExpressions:[\"SubExpression\"],grammars:{SubExpression:\"([Expressions])\"}}}(Coveo||(Coveo={})),function(t){var e,n;e=t.MagicBox||(t.MagicBox={}),(n=e.Grammars||(e.Grammars={})).Date={grammars:{Date:\"[DateYear]/[DateMonth]/[DateDay]\",DateYear:/([0-9]{4})/,DateMonth:/(1[0-2]|0?[1-9])/,DateDay:/([1-2][0-9]|3[0-1]|0?[1-9])/,DateRange:\"[Date][Spaces?]..[Spaces?][Date]\",DateRelative:[\"DateRelativeNegative\",\"DateRelativeTerm\"],DateRelativeTerm:/now|today|yesterday/,DateRelativeNegative:\"[DateRelativeTerm][DateRelativeNegativeRef]\",DateRelativeNegativeRef:/([\\-\\+][0-9]+(s|m|h|d|mo|y))/},include:[n.Basic]}}(Coveo||(Coveo={})),function(t){var e,n;e=t.MagicBox||(t.MagicBox={}),(n=e.Grammars||(e.Grammars={})).Field={basicExpressions:[\"FieldSimpleQuery\",\"FieldQuery\",\"Field\"],grammars:{FieldQuery:\"[Field][OptionalSpaces][FieldQueryOperation]\",FieldQueryOperation:[\"FieldQueryValue\",\"FieldQueryNumeric\"],FieldQueryValue:\"[FieldOperator][OptionalSpaces][FieldValue]\",FieldQueryNumeric:\"[FieldOperatorNumeric][OptionalSpaces][FieldValueNumeric]\",FieldSimpleQuery:\"[FieldName]:[OptionalSpaces][FieldValue]\",Field:\"@[FieldName]\",FieldName:/[a-zA-Z][a-zA-Z0-9\\.\\_]*/,FieldOperator:/==|=|<>/,FieldOperatorNumeric:/<=|>=|<|>/,FieldValue:[\"DateRange\",\"NumberRange\",\"DateRelative\",\"Date\",\"Number\",\"FieldValueList\",\"FieldValueString\"],FieldValueNumeric:[\"DateRelative\",\"Date\",\"Number\"],FieldValueString:[\"DoubleQuoted\",\"FieldValueNotQuoted\"],FieldValueList:\"([FieldValueString][FieldValueStringList*])\",FieldValueStringList:\"[FieldValueSeparator][FieldValueString]\",FieldValueSeparator:/ *, */,FieldValueNotQuoted:/[^ \\(\\),]+/,NumberRange:\"[Number][Spaces?]..[Spaces?][Number]\"},include:[n.Date,n.Basic]}}(Coveo||(Coveo={})),function(t){var e,n;e=t.MagicBox||(t.MagicBox={}),(n=e.Grammars||(e.Grammars={})).QueryExtension={basicExpressions:[\"QueryExtension\"],grammars:{QueryExtension:\"$[QueryExtensionName]([QueryExtensionArguments])\",QueryExtensionName:/\\w+/,QueryExtensionArguments:\"[QueryExtensionArgumentList*][QueryExtensionArgument]\",QueryExtensionArgumentList:\"[QueryExtensionArgument][Spaces?],[Spaces?]\",QueryExtensionArgument:\"[QueryExtensionArgumentName]:[Spaces?][QueryExtensionArgumentValue]\",QueryExtensionArgumentName:/\\w+/,QueryExtensionArgumentValue:[\"SingleQuoted\",\"Expressions\"]},include:[n.Basic]}}(Coveo||(Coveo={})),function(t){var e,n;e=t.MagicBox||(t.MagicBox={}),(n=e.Grammars||(e.Grammars={})).NestedQuery={basicExpressions:[\"NestedQuery\"],grammars:{NestedQuery:\"[[NestedField][OptionalSpaces][Expressions]]\",NestedField:\"[[Field]]\",FieldValue:[\"NestedQuery\"]},include:[n.Field]}}(Coveo||(Coveo={})),function(t){var e,n;e=t.MagicBox||(t.MagicBox={}),(n=e.Grammars||(e.Grammars={})).Complete={include:[n.NestedQuery,n.QueryExtension,n.SubExpression,n.Field,n.Basic]}}(Coveo||(Coveo={})),function(t){var a,s;a=t.MagicBox||(t.MagicBox={}),s=function(){function t(t,e,n){var s=this;void 0===n&&(n={}),this.element=t,this.grammar=e,this.options=n,this.lastSuggestions=[],_.isUndefined(this.options.inline)&&(this.options.inline=!1),a.$$(t).addClass(\"magic-box\"),this.options.inline&&a.$$(t).addClass(\"magic-box-inline\"),this.result=this.grammar.parse(\"\"),this.displayedResult=this.result.clean(),this.clearDom=document.createElement(\"div\"),this.clearDom.className=\"magic-box-clear\";var i=document.createElement(\"div\");i.className=\"magic-box-icon\",this.clearDom.appendChild(i);var o=a.$$(t).find(\".magic-box-input\");o?t.insertBefore(this.clearDom,o):((o=document.createElement(\"div\")).className=\"magic-box-input\",t.appendChild(this.clearDom),t.appendChild(o)),this.inputManager=new a.InputManager(o,function(t,e){e?(s.setText(t),s.onselect&&s.onselect(s.getFirstSuggestionText())):(s.setText(t),s.showSuggestion(),s.onchange&&s.onchange())},this),this.inputManager.ontabpress=function(){s.ontabpress&&s.ontabpress()};var r=this.inputManager.getValue();r&&(this.displayedResult.input=r),this.inputManager.setResult(this.displayedResult);var u=document.createElement(\"div\");u.className=\"magic-box-suggestions\",this.element.appendChild(u),this.suggestionsManager=new a.SuggestionsManager(u,{selectableClass:this.options.selectableSuggestionClass,selectedClass:this.options.selectedSuggestionClass,timeout:this.options.suggestionTimeout}),this.setupHandler()}return t.prototype.getResult=function(){return this.result},t.prototype.getDisplayedResult=function(){return this.displayedResult},t.prototype.setText=function(t){a.$$(this.element).toggleClass(\"magic-box-notEmpty\",0<t.length),this.result=this.grammar.parse(t),this.displayedResult=this.result.clean(),this.inputManager.setResult(this.displayedResult)},t.prototype.setCursor=function(t){this.inputManager.setCursor(t)},t.prototype.getCursor=function(){return this.inputManager.getCursor()},t.prototype.resultAtCursor=function(t){return this.displayedResult.resultAt(this.getCursor(),t)},t.prototype.setupHandler=function(){var e=this;this.inputManager.onblur=function(){a.$$(e.element).removeClass(\"magic-box-hasFocus\"),e.onblur&&e.onblur(),e.options.inline||e.clearSuggestion()},this.inputManager.onfocus=function(){a.$$(e.element).addClass(\"magic-box-hasFocus\"),e.showSuggestion(),e.onfocus&&e.onfocus()},this.inputManager.onkeydown=function(t){return 38!=t&&40!=t&&(13==t?(null==e.suggestionsManager.select()&&e.onsubmit&&e.onsubmit(),!1):(27==t&&(e.clearSuggestion(),e.blur()),!0))},this.inputManager.onchangecursor=function(){e.showSuggestion()},this.inputManager.onkeyup=function(t){if(38==t)e.onmove&&e.onmove(),e.focusOnSuggestion(e.suggestionsManager.moveUp()),e.onchange&&e.onchange();else{if(40!=t)return!0;e.onmove&&e.onmove(),e.focusOnSuggestion(e.suggestionsManager.moveDown()),e.onchange&&e.onchange()}return!1},this.clearDom.onclick=function(){e.clear()}},t.prototype.showSuggestion=function(){var e=this;this.suggestionsManager.mergeSuggestions(null!=this.getSuggestions?this.getSuggestions():[],function(t){e.updateSuggestion(t)})},t.prototype.updateSuggestion=function(t){var e=this;this.lastSuggestions=t;var n=this.getFirstSuggestionText();this.inputManager.setWordCompletion(n&&n.text),this.onsuggestions&&this.onsuggestions(t),_.each(t,function(t){null==t.onSelect&&null!=t.text&&(t.onSelect=function(){e.setText(t.text),e.onselect&&e.onselect(t)})})},t.prototype.focus=function(){a.$$(this.element).addClass(\"magic-box-hasFocus\"),this.inputManager.focus()},t.prototype.blur=function(){this.inputManager.blur()},t.prototype.clearSuggestion=function(){var e=this;this.suggestionsManager.mergeSuggestions([],function(t){e.updateSuggestion(t)}),this.inputManager.setWordCompletion(null)},t.prototype.focusOnSuggestion=function(t){null==t||null==t.text?(t=this.getFirstSuggestionText(),this.inputManager.setResult(this.displayedResult,t&&t.text)):this.inputManager.setResult(this.grammar.parse(t.text).clean(),t.text)},t.prototype.getFirstSuggestionText=function(){return _.find(this.lastSuggestions,function(t){return null!=t.text})},t.prototype.getText=function(){return this.inputManager.getValue()},t.prototype.getWordCompletion=function(){return this.inputManager.getWordCompletion()},t.prototype.clear=function(){this.setText(\"\"),this.showSuggestion(),this.focus(),this.onclear&&this.onclear()},t.prototype.hasSuggestions=function(){return this.suggestionsManager.hasSuggestions},t}(),a.Instance=s,a.create=function(t,e,n){return new s(t,e,n)},a.requestAnimationFrame=function(t){return\"requestAnimationFrame\"in window?window.requestAnimationFrame(t):setTimeout(t)}}(Coveo||(Coveo={}));\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = Coveo.MagicBox;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/exports-loader?Coveo.MagicBox!./node_modules/coveomagicbox/bin/MagicBox.min.js\n// module id = 323\n// module chunks = 11 13 44 78","import { IQueryboxOptions } from './Querybox';\nimport { QueryBuilder } from '../Base/QueryBuilder';\nimport * as _ from 'underscore';\nimport { Defer } from '../../MiscModules';\n\nexport class QueryboxQueryParameters {\n  private static queryIsCurrentlyBlocked = false;\n\n  constructor(private options: IQueryboxOptions) {}\n\n  private static queryIsBlocked() {\n    // This code runs on some assumption :\n    // Since all \"buildingQuery\" events would have to be run in the same call stack\n    // We can add a static flag to block 2 or more query box/omnibox from trying to modify the query inside the same event.\n    // If 2 query box are activated, we get duplicate terms in the query, or duplicate term correction with did you mean.\n    // This means that only one query box/searchbox would be able to modify the query in a single search page.\n    // This also means that if there is 2 search box enabled, the first one in the markup in the page would be able to do the job correctly as far as the query is concerned.\n    // The second one is inactive as far as the query is concerned.\n\n    // The flag gets reset in \"defer\" (setTimeout 0) so that it gets reset correctly when the query event has finished executing\n    if (!QueryboxQueryParameters.queryIsCurrentlyBlocked) {\n      QueryboxQueryParameters.queryIsCurrentlyBlocked = true;\n      Defer.defer(() => QueryboxQueryParameters.allowDuplicateQuery());\n      return false;\n    }\n    return true;\n  }\n\n  public static allowDuplicateQuery() {\n    QueryboxQueryParameters.queryIsCurrentlyBlocked = false;\n  }\n\n  public addParameters(queryBuilder: QueryBuilder, lastQuery: string) {\n    if (!QueryboxQueryParameters.queryIsBlocked()) {\n      if (this.options.enableWildcards) {\n        queryBuilder.enableWildcards = true;\n      }\n\n      if (this.options.enableQuestionMarks) {\n        queryBuilder.enableQuestionMarks = true;\n      }\n\n      if (this.options.enableLowercaseOperators) {\n        queryBuilder.enableLowercaseOperators = true;\n      }\n\n      if (!_.isEmpty(lastQuery)) {\n        queryBuilder.enableQuerySyntax = this.options.enableQuerySyntax;\n        queryBuilder.expression.add(lastQuery);\n        if (this.options.enablePartialMatch) {\n          queryBuilder.enablePartialMatch = this.options.enablePartialMatch;\n          if (this.options.partialMatchKeywords) {\n            queryBuilder.partialMatchKeywords = this.options.partialMatchKeywords;\n          }\n          if (this.options.partialMatchThreshold) {\n            queryBuilder.partialMatchThreshold = this.options.partialMatchThreshold;\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Querybox/QueryboxQueryParameters.ts","import { ComponentOptionsModel } from '../../models/ComponentOptionsModel';\nexport const MagicBox: any = require('exports-loader?Coveo.MagicBox!magic-box');\nimport { Initialization } from '../Base/Initialization';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { QueryEvents, IBuildingQueryEventArgs } from '../../events/QueryEvents';\nimport { MODEL_EVENTS, IAttributeChangedEventArg } from '../../models/Model';\nimport { QUERY_STATE_ATTRIBUTES, QueryStateModel } from '../../models/QueryStateModel';\nimport { StandaloneSearchInterfaceEvents } from '../../events/StandaloneSearchInterfaceEvents';\nimport { IAnalyticsNoMeta, analyticsActionCauseList } from '../Analytics/AnalyticsActionListMeta';\nimport { $$ } from '../../utils/Dom';\nimport { Assert } from '../../misc/Assert';\nimport { QueryboxQueryParameters } from './QueryboxQueryParameters';\nimport * as _ from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\n\nexport interface IQueryboxOptions {\n  enableSearchAsYouType?: boolean;\n  searchAsYouTypeDelay?: number;\n  enableQuerySyntax?: boolean;\n  enableWildcards?: boolean;\n  enableQuestionMarks?: boolean;\n  enableLowercaseOperators?: boolean;\n  enablePartialMatch?: boolean;\n  partialMatchKeywords?: number;\n  partialMatchThreshold?: string;\n  placeholder?: string;\n  triggerQueryOnClear?: boolean;\n}\n\n/**\n * The `Querybox` component renders an input which the end user can interact with to enter and submit queries.\n *\n * When the end user submits a search request, the `Querybox` component triggers a query and logs the corresponding\n * usage analytics data.\n *\n * For technical reasons, it is necessary to instantiate this component on a `div` element rather than on an `input`\n * element.\n *\n * See also the [`Searchbox`]{@link Searchbox} component, which can automatically instantiate a `Querybox` along with an\n * optional [`SearchButton`]{@link SearchButton} component.\n */\nexport class Querybox extends Component {\n  static ID = 'Querybox';\n\n  static doExport = () => {\n    exportGlobally({\n      Querybox: Querybox,\n      MagicBox: MagicBox,\n      QueryboxQueryParameters: QueryboxQueryParameters\n    });\n  };\n\n  /**\n   * The options for the Querybox.\n   * @componentOptions\n   */\n  public static options: IQueryboxOptions = {\n    /**\n     * Specifies whether to enable the search-as-you-type feature.\n     *\n     * Default value is `false`.\n     */\n    enableSearchAsYouType: ComponentOptions.buildBooleanOption({ defaultValue: false, section: 'SearchAsYouType' }),\n\n    /**\n     * If the [`enableSearchAsYouType`]{@link Querybox.options.enableSearchAsYouType} option is `true`, specifies how\n     * long to wait (in milliseconds) between each key press before triggering a new query.\n     *\n     * Default value is `50`. Minimum value is `0`\n     */\n    searchAsYouTypeDelay: ComponentOptions.buildNumberOption({ defaultValue: 50, min: 0, section: 'SearchAsYouType' }),\n\n    /**\n     * Specifies whether to interpret special query syntax (e.g., `@objecttype=message`) when the end user types\n     * a query in the `Querybox` (see\n     * [Coveo Query Syntax Reference](http://www.coveo.com/go?dest=adminhelp70&lcid=9&context=10005)). Setting this\n     * option to `true` also causes the `Querybox` to highlight any query syntax.\n     *\n     * Regardless of the value of this option, the Coveo Cloud REST Search API always interprets expressions surrounded\n     * by double quotes (`\"`) as exact phrase match requests.\n     *\n     * See also [`enableLowercaseOperators`]{@link Querybox.options.enableLowercaseOperators}.\n     *\n     * **Notes:**\n     * > * End user preferences can override the value you specify for this option.\n     * >\n     * > If the end user selects a value other than **Automatic** for the **Enable query syntax** setting (see\n     * > the [`enableQuerySyntax`]{@link ResultsPreferences.options.enableQuerySyntax} option of the\n     * > [`ResultsPreferences`]{@link ResultsPreferences} component), the end user preference takes precedence over this\n     * > option.\n     * >\n     * > * On-premises versions of the Coveo Search API require this option to be set to `true` in order to interpret\n     * > expressions surrounded by double quotes (`\"`) as exact phrase match requests.\n     *\n     * Default value is `false`.\n     */\n    enableQuerySyntax: ComponentOptions.buildBooleanOption({ defaultValue: false, section: 'QuerySyntax' }),\n\n    /**\n     * Specifies whether to expand basic expression keywords containing wildcards characters (`*`) to the possible\n     * matching keywords in order to broaden the query (see\n     * [Using Wildcards in Queries](http://www.coveo.com/go?dest=cloudhelp&lcid=9&context=359)).\n     *\n     * See also [`enableQuestionMarks`]{@link Querybox.options.enableQuestionMarks}.\n     *\n     *  **Note:**\n     * > If you are using an on-premises version of the Coveo Search API, you need to set the\n     * > [`enableQuerySyntax`]{@link Querybox.options.enableQuerySyntax} option to `true` to be able to set\n     * > `enableWildcards` to `true`.\n     *\n     * Default value is `false`.\n     */\n    enableWildcards: ComponentOptions.buildBooleanOption({ defaultValue: false, section: 'QuerySyntax' }),\n\n    /**\n     * If [`enableWildcards`]{@link Querybox.options.enableWildcards} is `true`, specifies whether to expand basic\n     * expression keywords containing question mark characters (`?`) to the possible matching keywords in order to\n     * broaden the query (see\n     * [Using Wildcards in Queries](http://www.coveo.com/go?dest=cloudhelp&lcid=9&context=359)).\n     *\n     * **Note:**\n     * > If you are using an on-premises version of the Coveo Search API, you also need to set the\n     * > [`enableQuerySyntax`]{@link Querybox.options.enableQuerySyntax} option to `true` in order to be able to set\n     * > `enableQuestionMarks` to `true`.\n     *\n     * Default value is `false`.\n     */\n    enableQuestionMarks: ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableWildcards' }),\n\n    /**\n     * If the [`enableQuerySyntax`]{@link Querybox.options.enableQuerySyntax} option is `true`, specifies whether to\n     * interpret the `AND`, `NOT`, `OR`, and `NEAR` keywords in the `Querybox` as query operators in the query, even if\n     * the end user types those keywords in lowercase.\n     *\n     * This option applies to all query operators (see\n     * [Coveo Query Syntax Reference](http://www.coveo.com/go?dest=adminhelp70&lcid=9&context=10005)).\n     *\n     * **Example:**\n     * > If this option and the `enableQuerySyntax` option are both `true`, the Coveo Platform interprets the `near`\n     * > keyword in a query such as `service center near me` as the `NEAR` query operator (not as a query term).\n     *\n     * > Otherwise, if the `enableQuerySyntax` option is `true` and this option is `false`, the end user has to type the\n     * > `NEAR` keyword in uppercase for the Coveo Platform to interpret it as a query operator.\n     *\n     * Default value is `false`.\n     */\n    enableLowercaseOperators: ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableQuerySyntax' }),\n\n    /**\n     * Whether to convert a basic expression containing at least a certain number of keywords (see the\n     * [`partialMatchKeywords`]{@link Querybox.options.partialMatchKeywords} option) to a *partial match expression*, so\n     * that items containing at least a certain number of those keywords (see the\n     * [`partialMatchThreshold`]{@link Querybox.options.partialMatchThreshold} option) will match the expression.\n     *\n     * **Notes:**\n     *\n     * > - Only the basic expression of the query (see [`q`]{@link q}) can be converted to a partial match expression.\n     * > - When the [`enableQuerySyntax`]{@link Querybox.options.enableQuerySyntax} option is set to `true`, this\n     * > feature has no effect on a basic expression containing query syntax (field expressions, operators, etc.).\n     *\n     * **Example:**\n     *\n     * > With the following markup configuration, if a basic expression contains at least 4 keywords, items containing\n     * > at least 75% of those keywords (round up) will match the query.\n     * > ```html\n     * > <div class='CoveoQuerybox' data-enable-partial-match='true' data-partial-match-keywords='4' data-partial-match-threshold='75%'></div>\n     * > ```\n     * > For instance, if the basic expression is `Coveo custom component configuration help`, items containing\n     * > all 5 of those keywords, or 4 of them (75% of 5 rounded up) will match the query.\n     *\n     * Default value is `false`, which implies that an item must contain all of the basic expression keywords to match\n     * the query.\n     * @notSupportedIn salesforcefree\n     */\n    enablePartialMatch: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\n    /**\n     * The minimum number of keywords that need to be present in a basic expression to convert it to a partial match\n     * expression.\n     *\n     * See also the [`partialMatchThreshold`]{@link Querybox.options.partialMatchThreshold} option.\n     *\n     * **Notes:**\n     * > - This option has no meaning unless the [`enablePartialMatch`]{@link Querybox.options.enablePartialMatch}\n     * > option is set to `true`.\n     * > - Repeated keywords in a basic expression count as a single keyword.\n     * > - Thesaurus expansions in a basic expression count towards the `partialMatchKeywords` count.\n     * > - Stemming expansions **do not** count towards the `partialMatchKeywords` count.\n     *\n     * **Example:**\n     * > If the `partialMatchKeywords` value is `7`, the basic expression will have to contain at least 7 keywords\n     * > to be converted to a partial match expression.\n     *\n     * Default value is `5`.\n     * @notSupportedIn salesforcefree\n     */\n    partialMatchKeywords: ComponentOptions.buildNumberOption({ defaultValue: 5, min: 1, depend: 'enablePartialMatch' }),\n\n    /**\n     * An absolute or relative value indicating the minimum number (rounded up) of partial match expression keywords an\n     * item must contain to match the expression.\n     *\n     * See also the [`partialMatchKeywords`]{@link Querybox.options.partialMatchKeywords} option.\n     *\n     * **Notes:**\n     * > - This option has no meaning unless the [`enablePartialMatch`]{@link Querybox.options.enablePartialMatch}\n     * > option is set to `true`.\n     * > - A keyword and its stemming expansions count as a single keyword when evaluating whether an item meets the\n     * > `partialMatchThreshold`.\n     *\n     * **Examples:**\n     * > If the `partialMatchThreshold` value is `50%` and the partial match expression contains exactly 9 keywords,\n     * > items will have to contain at least 5 of those keywords to match the query (50% of 9, rounded up).\n     *\n     * > With the same configuration, if the partial match expression contains exactly 12 keywords, items will have to\n     * > contain at least 6 of those keywords to match the query (50% of 12).\n     *\n     * > If the `partialMatchThreshold` value is `2`, items will always have to contain at least 2 of the partial match\n     * > expression keywords to match the query, no matter how many keywords the partial match expression actually\n     * > contains.\n     *\n     * Default value is `50%`.\n     * @notSupportedIn salesforcefree\n     */\n    partialMatchThreshold: ComponentOptions.buildStringOption({ defaultValue: '50%', depend: 'enablePartialMatch' }),\n\n    /**\n     * Specifies whether to trigger a query when clearing the `Querybox`.\n     *\n     * Default value is `false`.\n     */\n    triggerQueryOnClear: ComponentOptions.buildBooleanOption({ defaultValue: false })\n  };\n\n  public magicBox: Coveo.MagicBox.Instance;\n  private lastQuery: string;\n  private searchAsYouTypeTimeout: number;\n\n  /**\n   * Creates a new `Querybox component`. Creates a new `Coveo.Magicbox` instance and wraps the Magicbox methods\n   * (`onblur`, `onsubmit` etc.). Binds event on `buildingQuery` and before redirection (for standalone box).\n   * @param element The HTMLElement on which to instantiate the component. This cannot be an HTMLInputElement for\n   * technical reasons.\n   * @param options The options for the `Querybox` component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   */\n  constructor(public element: HTMLElement, public options?: IQueryboxOptions, public bindings?: IComponentBindings) {\n    super(element, Querybox.ID, bindings);\n\n    if (element instanceof HTMLInputElement) {\n      this.logger.error('Querybox cannot be used on an HTMLInputElement');\n    }\n\n    this.options = ComponentOptions.initComponentOptions(element, Querybox, options);\n    this.options = _.extend({}, this.options, this.componentOptionsModel.get(ComponentOptionsModel.attributesEnum.searchBox));\n\n    $$(this.element).toggleClass('coveo-query-syntax-disabled', this.options.enableQuerySyntax == false);\n\n    this.magicBox = MagicBox.create(\n      element,\n      new MagicBox.Grammar('Query', {\n        Query: '[Term*][Spaces?]',\n        Term: '[Spaces?][Word]',\n        Spaces: / +/,\n        Word: /[^ ]+/\n      }),\n      {\n        inline: true\n      }\n    );\n\n    this.bind.onRootElement(QueryEvents.buildingQuery, (args: IBuildingQueryEventArgs) => this.handleBuildingQuery(args));\n    this.bind.onRootElement(StandaloneSearchInterfaceEvents.beforeRedirect, () => this.updateQueryState());\n    this.bind.onQueryState(MODEL_EVENTS.CHANGE_ONE, QUERY_STATE_ATTRIBUTES.Q, (args: IAttributeChangedEventArg) =>\n      this.handleQueryStateChanged(args)\n    );\n\n    if (this.options.enableSearchAsYouType) {\n      $$(this.element).addClass('coveo-search-as-you-type');\n      this.magicBox.onchange = () => {\n        this.searchAsYouType();\n      };\n    }\n\n    this.magicBox.onsubmit = () => {\n      this.submit();\n    };\n\n    this.magicBox.onblur = () => {\n      this.updateQueryState();\n    };\n\n    this.magicBox.onclear = () => {\n      this.updateQueryState();\n      if (this.options.triggerQueryOnClear) {\n        this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxClear, {});\n        this.triggerNewQuery(false);\n      }\n    };\n  }\n\n  /**\n   * Adds the current content of the input to the query and triggers a query if the current content of the input has\n   * changed since last submit.\n   *\n   * Also logs the `serachboxSubmit` event in the usage analytics.\n   */\n  public submit(): void {\n    this.magicBox.clearSuggestion();\n    this.updateQueryState();\n    this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxSubmit, {});\n    this.triggerNewQuery(false);\n  }\n\n  /**\n   * Sets the content of the input.\n   *\n   * @param text The string to set in the input.\n   */\n  public setText(text: string): void {\n    this.magicBox.setText(text);\n    this.updateQueryState();\n  }\n\n  /**\n   * Clears the content of the input.\n   *\n   * See also the [`triggerQueryOnClear`]{@link Querybox.options.triggerQueryOnClear} option.\n   */\n  public clear(): void {\n    this.magicBox.clear();\n  }\n\n  /**\n   * Gets the content of the input.\n   *\n   * @returns {string} The content of the input.\n   */\n  public getText(): string {\n    return this.magicBox.getText();\n  }\n\n  /**\n   * Gets the result from the input.\n   *\n   * @returns {Result} The result.\n   */\n  public getResult() {\n    return this.magicBox.getResult();\n  }\n\n  /**\n   * Gets the displayed result from the input.\n   *\n   * @returns {Result} The displayed result.\n   */\n  public getDisplayedResult() {\n    return this.magicBox.getDisplayedResult();\n  }\n\n  /**\n   * Gets the current cursor position in the input.\n   *\n   * @returns {number} The cursor position (index starts at 0).\n   */\n  public getCursor(): number {\n    return this.magicBox.getCursor();\n  }\n\n  /**\n   * Gets the result at cursor position.\n   *\n   * @param match {string | { (result): boolean }} The match condition.\n   *\n   * @returns {Result[]} The result.\n   */\n  public resultAtCursor(match?: string | { (result): boolean }) {\n    return this.magicBox.resultAtCursor(match);\n  }\n\n  private handleBuildingQuery(args: IBuildingQueryEventArgs): void {\n    Assert.exists(args);\n    Assert.exists(args.queryBuilder);\n\n    this.updateQueryState();\n    this.lastQuery = this.magicBox.getText();\n    new QueryboxQueryParameters(this.options).addParameters(args.queryBuilder, this.lastQuery);\n  }\n\n  private triggerNewQuery(searchAsYouType: boolean): void {\n    clearTimeout(this.searchAsYouTypeTimeout);\n    let text = this.magicBox.getText();\n    if (this.lastQuery != text && text != null) {\n      this.lastQuery = text;\n      this.queryController.executeQuery({\n        searchAsYouType: searchAsYouType,\n        logInActionsHistory: true\n      });\n    }\n  }\n\n  private updateQueryState(): void {\n    this.queryStateModel.set(QueryStateModel.attributesEnum.q, this.magicBox.getText());\n  }\n\n  private handleQueryStateChanged(args: IAttributeChangedEventArg): void {\n    Assert.exists(args);\n    let q = <string>args.value;\n    if (q != this.magicBox.getText()) {\n      this.magicBox.setText(q);\n    }\n  }\n\n  private searchAsYouType(): void {\n    clearTimeout(this.searchAsYouTypeTimeout);\n    this.searchAsYouTypeTimeout = window.setTimeout(() => {\n      this.usageAnalytics.logSearchAsYouType<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxAsYouType, {});\n      this.triggerNewQuery(true);\n    }, this.options.searchAsYouTypeDelay);\n  }\n}\nInitialization.registerAutoCreateComponent(Querybox);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Querybox/Querybox.ts"],"sourceRoot":""}