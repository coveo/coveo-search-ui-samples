webpackJsonpCoveo__temporary([7],{100:function(t,e,n){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function s(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(10),r=n(72),u=n(5),a=n(16),l=n(12),c=n(7),p=n(1),h=n(9),d=n(6),g=n(8),f=n(2),y=n(358),m=n(166),b=n(129),x=n(361),v=function(t){function e(n,s,i){var u=t.call(this,n,e.ID,i)||this;u.element=n,u.options=s,u.bindings=i,n instanceof HTMLInputElement&&u.logger.error("Querybox cannot be used on an HTMLInputElement"),u.options=g.ComponentOptions.initComponentOptions(n,e,s),new x.QueryboxOptionsProcessing(u).postProcess(),p.$$(u.element).toggleClass("coveo-query-syntax-disabled",0==u.options.enableQuerySyntax),u.magicBox=m.createMagicBox(n,new b.Grammar("Query",{Query:"[Term*][Spaces?]",Term:"[Spaces?][Word]",Spaces:/ +/,Word:/[^ ]+/}),{inline:!0});var d=p.$$(u.magicBox.element).find("input");return d&&p.$$(d).setAttribute("aria-label",u.options.placeholder||c.l("Search")),u.bind.onRootElement(o.QueryEvents.buildingQuery,function(t){return u.handleBuildingQuery(t)}),u.bind.onRootElement(r.StandaloneSearchInterfaceEvents.beforeRedirect,function(){return u.updateQueryState()}),u.bind.onQueryState(a.MODEL_EVENTS.CHANGE_ONE,l.QUERY_STATE_ATTRIBUTES.Q,function(t){return u.handleQueryStateChanged(t)}),u.options.enableSearchAsYouType&&(p.$$(u.element).addClass("coveo-search-as-you-type"),u.magicBox.onchange=function(){u.searchAsYouType()}),u.magicBox.onsubmit=function(){u.submit()},u.magicBox.onblur=function(){u.updateQueryState()},u.magicBox.onclear=function(){u.updateQueryState(),u.options.triggerQueryOnClear&&(u.usageAnalytics.logSearchEvent(h.analyticsActionCauseList.searchboxClear,{}),u.triggerNewQuery(!1))},u}return s(e,t),e.prototype.submit=function(){this.magicBox.clearSuggestion(),this.updateQueryState(),this.usageAnalytics.logSearchEvent(h.analyticsActionCauseList.searchboxSubmit,{}),this.triggerNewQuery(!1)},e.prototype.setText=function(t){this.magicBox.setText(t),this.updateQueryState()},e.prototype.clear=function(){this.magicBox.clear()},e.prototype.getText=function(){return this.magicBox.getText()},e.prototype.getResult=function(){return this.magicBox.getResult()},e.prototype.getDisplayedResult=function(){return this.magicBox.getDisplayedResult()},e.prototype.getCursor=function(){return this.magicBox.getCursor()},e.prototype.resultAtCursor=function(t){return this.magicBox.resultAtCursor(t)},e.prototype.handleBuildingQuery=function(t){u.Assert.exists(t),u.Assert.exists(t.queryBuilder),this.updateQueryState(),this.lastQuery=this.magicBox.getText(),new y.QueryboxQueryParameters(this.options).addParameters(t.queryBuilder,this.lastQuery)},e.prototype.triggerNewQuery=function(t){clearTimeout(this.searchAsYouTypeTimeout);var e=this.magicBox.getText();this.lastQuery!=e&&null!=e&&(this.lastQuery=e,this.queryController.executeQuery({searchAsYouType:t,logInActionsHistory:!0}))},e.prototype.updateQueryState=function(){this.queryStateModel.set(l.QueryStateModel.attributesEnum.q,this.magicBox.getText())},e.prototype.handleQueryStateChanged=function(t){u.Assert.exists(t);var e=t.value;e!=this.magicBox.getText()&&this.magicBox.setText(e)},e.prototype.searchAsYouType=function(){var t=this;clearTimeout(this.searchAsYouTypeTimeout),this.searchAsYouTypeTimeout=window.setTimeout(function(){t.usageAnalytics.logSearchAsYouType(h.analyticsActionCauseList.searchboxAsYouType,{}),t.triggerNewQuery(!0)},this.options.searchAsYouTypeDelay)},e.ID="Querybox",e.doExport=function(){i.exportGlobally({Querybox:e,QueryboxQueryParameters:y.QueryboxQueryParameters})},e.options={enableSearchAsYouType:g.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Advanced Options"}),searchAsYouTypeDelay:g.ComponentOptions.buildNumberOption({defaultValue:50,min:0,section:"Advanced Options"}),enableQuerySyntax:g.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Advanced Options"}),enableWildcards:g.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Advanced Options"}),enableQuestionMarks:g.ComponentOptions.buildBooleanOption({defaultValue:!1,depend:"enableWildcards"}),enableLowercaseOperators:g.ComponentOptions.buildBooleanOption({defaultValue:!1,depend:"enableQuerySyntax"}),enablePartialMatch:g.ComponentOptions.buildBooleanOption({defaultValue:!1}),partialMatchKeywords:g.ComponentOptions.buildNumberOption({defaultValue:5,min:1,depend:"enablePartialMatch"}),partialMatchThreshold:g.ComponentOptions.buildStringOption({defaultValue:"50%",depend:"enablePartialMatch"}),triggerQueryOnClear:g.ComponentOptions.buildBooleanOption({defaultValue:!1})},e}(d.Component);e.Querybox=v,f.Initialization.registerAutoCreateComponent(v)},129:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(349),i=n(347),o=n(351),r=n(0),u=n(345),a=n(162),l=n(346),c=function(){function t(t,e){void 0===e&&(e={}),this.expressions={},this.start=new s.ExpressionRef(t,null,"start",this),this.addExpressions(e)}return t.prototype.addExpressions=function(t){var e=this;r.each(t,function(t,n){e.addExpression(n,t)})},t.prototype.addExpression=function(e,n){if(e in this.expressions)throw new Error("Grammar already contain the id:"+e);this.expressions[e]=t.buildExpression(n,e,this)},t.prototype.getExpression=function(t){return this.expressions[t]},t.prototype.parse=function(t){return this.start.parse(t,!0)},t.buildExpression=function(t,e,n){if(void 0===t)throw new Error("Invalid Expression: "+t);if(r.isString(t))return this.buildStringExpression(t,e,n);if(r.isArray(t))return new i.ExpressionOptions(r.map(t,function(t,i){return new s.ExpressionRef(t,null,e+"_"+i,n)}),e);if(r.isRegExp(t))return new o.ExpressionRegExp(t,e,n);if(r.isFunction(t))return new u.ExpressionFunction(t,e,n);throw new Error("Invalid Expression: "+t)},t.buildStringExpression=function(e,n,i){var o=t.stringMatch(e,t.spliter),u=r.map(o,function(t,e){if(t[1]){var o=t[1],r=t[3]?Number(t[3]):t[2]||null;return new s.ExpressionRef(o,r,n+"_"+e,i)}return new a.ExpressionConstant(t[4],n+"_"+e)});if(1==u.length){var c=u[0];return c.id=n,c}return new l.ExpressionList(u,n)},t.stringMatch=function(t,e){for(var n=[],s=new RegExp(e.source,"g"),i=s.exec(t);null!==i;)n.push(i),i=s.exec(t);return n},t.spliter=/\[(\w+)(\*|\+|\?|\{([1-9][0-9]*)\})?\]|(.[^\[]*)/,t}();e.Grammar=c},162:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(40),i=n(40),o=function(){function t(t,e){this.value=t,this.id=e}return t.prototype.parse=function(t,e){var n=0==t.indexOf(this.value),o=new s.Result(n?this.value:null,this,t);return n&&e&&t.length>this.value.length?new i.EndOfInputResult(o):o},t.prototype.toString=function(){return this.value},t}();e.ExpressionConstant=o},163:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpressionEndOfInput={id:"end of input",parse:null}},164:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(96),i=n(353);e.Field={basicExpressions:["FieldSimpleQuery","FieldQuery","Field"],grammars:{FieldQuery:"[Field][OptionalSpaces][FieldQueryOperation]",FieldQueryOperation:["FieldQueryValue","FieldQueryNumeric"],FieldQueryValue:"[FieldOperator][OptionalSpaces][FieldValue]",FieldQueryNumeric:"[FieldOperatorNumeric][OptionalSpaces][FieldValueNumeric]",FieldSimpleQuery:"[FieldName]:[OptionalSpaces][FieldValue]",Field:"@[FieldName]",FieldName:/[a-zA-Z][a-zA-Z0-9\.\_]*/,FieldOperator:/==|=|<>/,FieldOperatorNumeric:/<=|>=|<|>/,FieldValue:["DateRange","NumberRange","DateRelative","Date","Number","FieldValueList","FieldValueString"],FieldValueNumeric:["DateRelative","Date","Number"],FieldValueString:["DoubleQuoted","FieldValueNotQuoted"],FieldValueList:"([FieldValueString][FieldValueStringList*])",FieldValueStringList:"[FieldValueSeparator][FieldValueString]",FieldValueSeparator:/ *, */,FieldValueNotQuoted:/[^ \(\),]+/,NumberRange:"[Number][Spaces?]..[Spaces?][Number]"},include:[i.Date,s.Basic]}},166:function(t,e,n){"use strict";function s(t,e,n){return new p(t,e,n)}function i(t){return"requestAnimationFrame"in window?window.requestAnimationFrame(t):setTimeout(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(402),u=n(357),a=n(356),l=n(0),c=n(404),p=function(){function t(t,e,n){void 0===n&&(n={});var s=this;this.element=t,this.grammar=e,this.options=n,this.lastSuggestions=[],l.isUndefined(this.options.inline)&&(this.options.inline=!1),o.$$(t).addClass("magic-box"),this.options.inline&&o.$$(t).addClass("magic-box-inline"),o.$$(this.element).setAttribute("role","combobox"),this.result=this.grammar.parse(""),this.displayedResult=this.result.clean();var i=o.$$(t).find(".magic-box-input");i||(i=document.createElement("div"),i.className="magic-box-input",t.appendChild(i)),this.inputManager=new a.InputManager(i,function(t,e){e?(s.setText(t),s.onselect&&s.onselect(s.getFirstSuggestionText())):(s.setText(t),s.showSuggestion(),s.onchange&&s.onchange())},this),this.inputManager.ontabpress=function(){s.ontabpress&&s.ontabpress()};var r=this.inputManager.getValue();r&&(this.displayedResult.input=r),this.inputManager.setResult(this.displayedResult);var p=document.createElement("div");p.className="magic-box-suggestions",this.element.appendChild(p),this.suggestionsManager=new u.SuggestionsManager(p,this.element,this.inputManager,{selectableClass:this.options.selectableSuggestionClass,selectedClass:this.options.selectedSuggestionClass,timeout:this.options.suggestionTimeout}),this.magicBoxClear=new c.MagicBoxClear(this),this.setupHandler()}return t.prototype.getResult=function(){return this.result},t.prototype.getDisplayedResult=function(){return this.displayedResult},t.prototype.setText=function(t){o.$$(this.element).toggleClass("magic-box-notEmpty",t.length>0),this.magicBoxClear.toggleTabindex(t.length>0),this.result=this.grammar.parse(t),this.displayedResult=this.result.clean(),this.inputManager.setResult(this.displayedResult)},t.prototype.setCursor=function(t){this.inputManager.setCursor(t)},t.prototype.getCursor=function(){return this.inputManager.getCursor()},t.prototype.resultAtCursor=function(t){return this.displayedResult.resultAt(this.getCursor(),t)},t.prototype.setupHandler=function(){var t=this;this.inputManager.onblur=function(){o.$$(t.element).removeClass("magic-box-hasFocus"),t.onblur&&t.onblur(),t.options.inline||t.clearSuggestion()},this.inputManager.onfocus=function(){o.$$(t.element).addClass("magic-box-hasFocus"),t.showSuggestion(),t.onfocus&&t.onfocus()},this.inputManager.onkeydown=function(e){if(38==e||40==e)return!1;if(13==e){return null==t.suggestionsManager.selectAndReturnKeyboardFocusedElement()&&t.onsubmit&&t.onsubmit(),!1}return 27==e&&(t.clearSuggestion(),t.blur()),!0},this.inputManager.onchangecursor=function(){t.showSuggestion()},this.inputManager.onkeyup=function(e){if(38==e)t.onmove&&t.onmove(),t.focusOnSuggestion(t.suggestionsManager.moveUp()),t.onchange&&t.onchange();else{if(40!=e)return!0;t.onmove&&t.onmove(),t.focusOnSuggestion(t.suggestionsManager.moveDown()),t.onchange&&t.onchange()}return!1}},t.prototype.showSuggestion=function(){var t=this;this.suggestionsManager.mergeSuggestions(null!=this.getSuggestions?this.getSuggestions():[],function(e){t.updateSuggestion(e)})},t.prototype.updateSuggestion=function(t){var e=this;this.lastSuggestions=t;var n=this.getFirstSuggestionText();this.inputManager.setWordCompletion(n&&n.text),this.onsuggestions&&this.onsuggestions(t),l.each(t,function(t){null==t.onSelect&&null!=t.text&&(t.onSelect=function(){e.setText(t.text),e.onselect&&e.onselect(t)})})},t.prototype.focus=function(){o.$$(this.element).addClass("magic-box-hasFocus"),this.inputManager.focus()},t.prototype.blur=function(){this.inputManager.blur()},t.prototype.clearSuggestion=function(){var t=this;this.suggestionsManager.mergeSuggestions([],function(e){t.updateSuggestion(e)}),this.inputManager.setWordCompletion(null)},t.prototype.focusOnSuggestion=function(t){null==t||null==t.text?(t=this.getFirstSuggestionText(),this.inputManager.setResult(this.displayedResult,t&&t.text)):this.inputManager.setResult(this.grammar.parse(t.text).clean(),t.text)},t.prototype.getFirstSuggestionText=function(){return l.find(this.lastSuggestions,function(t){return null!=t.text})},t.prototype.getText=function(){return this.inputManager.getValue()},t.prototype.getWordCompletion=function(){return this.inputManager.getWordCompletion()},t.prototype.clear=function(){this.setText(""),this.showSuggestion(),this.focus(),this.onclear&&this.onclear()},t.prototype.hasSuggestions=function(){return this.suggestionsManager.hasSuggestions},t}();e.MagicBoxInstance=p,e.createMagicBox=s,e.requestAnimationFrame=i,r.doMagicBoxExport()},167:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=function(){function t(){}return t.escapeRegExp=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.highlightText=function(t,e,n,s,i){var o=this;if(void 0===n&&(n=!1),void 0===s&&(s="magic-box-hightlight"),void 0===i&&(i=""),0==e.length)return t;var r=this.escapeRegExp(e),u="("+r+")|(.*?(?="+r+")|.+)",a=new RegExp(u,n?"gi":"g");return t.replace(a,function(t,e,n){return o.escapeText(null!=e?s:i,t)})},t.escapeText=function(t,e){return'<span class="'+t+'">'+s.escape(e)+"</span>"},t}();e.MagicBoxUtils=i},17:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(11),i=n(30),o=n(1);n(371);var r=function(){function t(){this.logger=new s.Logger(this)}return t.prototype.withOwner=function(t){return this.eventOwner=t,this},t.prototype.withElement=function(t){return t instanceof HTMLElement?this.element=o.$$(t):this.element=t,this},t.prototype.withLabel=function(t){return this.label=t,this},t.prototype.withTitle=function(t){return this.title=t,this},t.prototype.withSelectAction=function(t){return this.clickAction=t,this.enterKeyboardAction=t,this},t.prototype.withClickAction=function(t){return this.clickAction=t,this},t.prototype.withEnterKeyboardAction=function(t){return this.enterKeyboardAction=t,this},t.prototype.withFocusAndMouseEnterAction=function(t){return this.focusAction=t,this.mouseenterAction=t,this},t.prototype.withFocusAction=function(t){return this.focusAction=t,this},t.prototype.withMouseEnterAction=function(t){return this.mouseenterAction=t,this},t.prototype.withBlurAndMouseLeaveAction=function(t){return this.mouseleaveAction=t,this.blurAction=t,this},t.prototype.withMouseLeaveAction=function(t){return this.mouseleaveAction=t,this},t.prototype.withBlurAction=function(t){return this.blurAction=t,this},t.prototype.build=function(){return this.element||(this.element=o.$$("div")),this.ensureCorrectRole(),this.ensureCorrectLabel(),this.ensureTitle(),this.ensureSelectAction(),this.ensureUnselectAction(),this.ensureMouseenterAndFocusAction(),this.ensureMouseleaveAndBlurAction(),this.ensureDifferentiationBetweenKeyboardAndMouseFocus(),this},t.prototype.ensureDifferentiationBetweenKeyboardAndMouseFocus=function(){var t=this,e="coveo-accessible-button-pressed",n="coveo-accessible-button-focused";o.$$(this.element).addClass("coveo-accessible-button"),o.$$(this.element).on("mousedown",function(){o.$$(t.element).addClass(e),o.$$(t.element).removeClass(n)}),o.$$(this.element).on("mouseup",function(){return o.$$(t.element).removeClass(e)}),o.$$(this.element).on("focus",function(){o.$$(t.element).hasClass(e)||o.$$(t.element).addClass(n)}),o.$$(this.element).on("blur",function(){return o.$$(t.element).removeClass(n)})},t.prototype.ensureCorrectRole=function(){this.element.getAttribute("role")||this.element.setAttribute("role","button")},t.prototype.ensureCorrectLabel=function(){if(!this.label)return void this.logger.error("Missing label to create an accessible button !");this.element.setAttribute("aria-label",this.label)},t.prototype.ensureTitle=function(){this.title&&this.element.setAttribute("title",this.title)},t.prototype.ensureTabIndex=function(){this.element.setAttribute("tabindex","0")},t.prototype.ensureSelectAction=function(){var t=this;this.enterKeyboardAction&&(this.ensureTabIndex(),this.bindEvent("keyup",i.KeyboardUtils.keypressAction(i.KEYBOARD.ENTER,function(e){return t.enterKeyboardAction(e)}))),this.clickAction&&this.bindEvent("click",this.clickAction)},t.prototype.ensureUnselectAction=function(){this.blurAction&&this.bindEvent("blur",this.blurAction),this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction)},t.prototype.ensureMouseenterAndFocusAction=function(){this.mouseenterAction&&this.bindEvent("mouseenter",this.mouseenterAction),this.focusAction&&this.bindEvent("focus",this.focusAction)},t.prototype.ensureMouseleaveAndBlurAction=function(){this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction),this.blurAction&&this.bindEvent("blur",this.blurAction)},t.prototype.bindEvent=function(t,e){this.eventOwner?this.eventOwner.on(this.element,t,e):o.$$(this.element).on(t,e)},t}();e.AccessibleButton=r},345:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e,n){this.func=t,this.id=e,this.grammar=n}return t.prototype.parse=function(t,e){return this.func(t,e,this)},t.prototype.toString=function(){return this.id},t}();e.ExpressionFunction=s},346:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(40),i=function(){function t(t,e){if(this.parts=t,this.id=e,0==t.length)throw new Error(JSON.stringify(e)+" should have at least 1 parts")}return t.prototype.parse=function(t,e){for(var n,i=[],o=t,r=0;r<this.parts.length;r++){if(n=this.parts[r].parse(o,e&&r==this.parts.length-1),i.push(n),!n.isSuccess())break;o=o.substr(n.getLength())}return new s.Result(i,this,t)},t.prototype.toString=function(){return this.id},t}();e.ExpressionList=i},347:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(348),i=function(){function t(t,e){this.parts=t,this.id=e}return t.prototype.parse=function(t,e){for(var n=[],i=0;i<this.parts.length;i++){var o=this.parts[i].parse(t,e);if(o.isSuccess())return new s.OptionResult(o,this,t,n);n.push(o)}return new s.OptionResult(null,this,t,n)},t.prototype.toString=function(){return this.id},t}();e.ExpressionOptions=i},348:function(t,e,n){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function s(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(40),o=n(0),r=function(t){function e(e,n,s,i){var r=t.call(this,null!=e?[e]:null,n,s)||this;return r.result=e,r.expression=n,r.input=s,r.failAttempt=i,o.forEach(r.failAttempt,function(t){t.parent=r}),r}return s(e,t),e.prototype.getExpect=function(){var t=this,e=[];return null!=this.result&&(e=this.result.getExpect()),e=o.reduce(this.failAttempt,function(t,e){return t.concat(e.getExpect())},e),e.length>0&&o.all(e,function(e){return e.input==t.input})?[this]:e},e.prototype.clean=function(t){if(null!=t||!this.isSuccess()){t=o.rest(t||o.last(this.getBestExpect()).path(this));var e=o.first(t);return null==e?new i.Result(null,this.expression,this.input):new i.Result([e.clean(o.rest(t))],this.expression,this.input)}return new i.Result(o.map(this.result.subResults,function(t){return t.clean()}),this.expression,this.input)},e}(i.Result);e.OptionResult=r},349:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(40),i=n(350),o=n(163),r=n(0),u=function(){function t(t,e,n,s){this.ref=t,this.occurrence=e,this.id=n,this.grammar=s}return t.prototype.parse=function(t,e){var n=this.grammar.getExpression(this.ref);if(null==n)throw new Error("Expression not found:"+this.ref);return"?"==this.occurrence||null==this.occurrence?this.parseOnce(t,e,n):this.parseMany(t,e,n)},t.prototype.parseOnce=function(t,e,n){var u=n.parse(t,e),a=u.isSuccess();return a||"?"!=this.occurrence?new i.RefResult([u],this,t,a?null:u):e?0==t.length?new i.RefResult([],this,t,u):r.all(u.getBestExpect(),function(t){return t.expression==o.ExpressionEndOfInput})?new i.RefResult([new s.Result(null,o.ExpressionEndOfInput,t)],this,t,u):u:new i.RefResult([],this,t,null)},t.prototype.parseMany=function(t,e,n){var u,a,l=[],c=t;do{u=n.parse(c,!1),(a=u.isSuccess())&&(l.push(u),c=c.substr(u.getLength()))}while(a&&u.input!=c);var p=r.isNumber(this.occurrence)?this.occurrence:"+"==this.occurrence?1:0;if(l.length<p)l.push(u);else if(e)if(l.length>0){var h=r.last(l);u=n.parse(h.input,!0),u.isSuccess()?l[l.length-1]=u:(l.push(new s.Result(null,o.ExpressionEndOfInput,h.input.substr(h.getLength()))),u=n.parse(h.input.substr(h.getLength()),!0))}else if(0!=t.length){var d=new s.Result(null,o.ExpressionEndOfInput,t);return new i.RefResult([d],this,t,u)}return new i.RefResult(l,this,t,u)},t.prototype.toString=function(){return this.id},t}();e.ExpressionRef=u},350:function(t,e,n){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function s(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(40),o=n(0),r=function(t){function e(e,n,s,i){var r=t.call(this,e,n,s)||this;return r.expression=n,r.input=s,o.last(e)!=i&&(r.failAttempt=i,null!=r.failAttempt&&(r.failAttempt.parent=r)),r}return s(e,t),e.prototype.getExpect=function(){var e=t.prototype.getExpect.call(this);return null!=this.failAttempt?e.concat(this.failAttempt.getExpect()):e},e.prototype.clean=function(e){if(null!=this.failAttempt&&(null!=e||!this.isSuccess())){e=e||o.last(this.getBestExpect()).path(this);var n=o.first(e);if(null!=n&&n==this.failAttempt){var s=o.last(this.subResults),r=o.map(null!=s&&s.isSuccess()?this.subResults:o.initial(this.subResults),function(t){return t.clean()});return r.push(n.clean(o.rest(e))),new i.Result(r,this.expression,this.input)}}return t.prototype.clean.call(this,e)},e}(i.Result);e.RefResult=r},351:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(40),i=n(40),o=function(){function t(t,e,n){this.value=t,this.id=e}return t.prototype.parse=function(t,e){var n=t.match(this.value);null!=n&&0!=n.index&&(n=null);var o=new s.Result(null!=n?n[0]:null,this,t);return o.isSuccess()&&e&&t.length>o.value.length?new i.EndOfInputResult(o):o},t.prototype.toString=function(){return this.id},t}();e.ExpressionRegExp=o},352:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(164);e.NestedQuery={basicExpressions:["NestedQuery"],grammars:{NestedQuery:"[[NestedField][OptionalSpaces][Expressions]]",NestedField:"[[Field]]",FieldValue:["NestedQuery"]},include:[s.Field]}},353:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(96);e.Date={grammars:{Date:"[DateYear]/[DateMonth]/[DateDay]",DateYear:/([0-9]{4})/,DateMonth:/(1[0-2]|0?[1-9])/,DateDay:/([1-2][0-9]|3[0-1]|0?[1-9])/,DateRange:"[Date][Spaces?]..[Spaces?][Date]",DateRelative:["DateRelativeNegative","DateRelativeTerm"],DateRelativeTerm:/now|today|yesterday/,DateRelativeNegative:"[DateRelativeTerm][DateRelativeNegativeRef]",DateRelativeNegativeRef:/([\-\+][0-9]+(s|m|h|d|mo|y))/},include:[s.Basic]}},354:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(96);e.QueryExtension={basicExpressions:["QueryExtension"],grammars:{QueryExtension:"$[QueryExtensionName]([QueryExtensionArguments])",QueryExtensionName:/\w+/,QueryExtensionArguments:"[QueryExtensionArgumentList*][QueryExtensionArgument]",QueryExtensionArgumentList:"[QueryExtensionArgument][Spaces?],[Spaces?]",QueryExtensionArgument:"[QueryExtensionArgumentName]:[Spaces?][QueryExtensionArgumentValue]",QueryExtensionArgumentName:/\w+/,QueryExtensionArgumentValue:["SingleQuoted","Expressions"]},include:[s.Basic]}},355:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SubExpression={basicExpressions:["SubExpression"],grammars:{SubExpression:"([Expressions])"}}},356:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),i=n(0),o=n(30),r=n(7),u=function(){function t(t,e,n){this.onchange=e,this.magicBox=n,this.hasFocus=!1,this.underlay=document.createElement("div"),this.underlay.className="magic-box-underlay",this.highlightContainer=document.createElement("span"),this.highlightContainer.className="magic-box-highlight-container",this.underlay.appendChild(this.highlightContainer),this.ghostTextContainer=document.createElement("span"),this.ghostTextContainer.className="magic-box-ghost-text",this.underlay.appendChild(this.ghostTextContainer),this.input=s.$$(t).find("input"),this.input?t.insertBefore(this.underlay,this.input):(this.input=document.createElement("input"),t.appendChild(this.underlay),t.appendChild(this.input)),this.setupHandler(),this.addAccessibilitiesProperties()}return t.prototype.updateInput=function(){this.input.value!=this.result.input&&(this.input.value=this.result.input,this.hasFocus&&this.setCursor(this.getValue().length))},t.prototype.updateHighlight=function(){s.$$(this.highlightContainer).empty(),this.highlightContainer.appendChild(this.result.toHtmlElement())},t.prototype.updateWordCompletion=function(){s.$$(this.ghostTextContainer).empty(),this.ghostTextContainer.innerHTML="",null!=this.wordCompletion&&this.ghostTextContainer.appendChild(document.createTextNode(this.wordCompletion.substr(this.result.input.length)))},t.prototype.updateScroll=function(t){var e=this;void 0===t&&(t=!0);var n=function(){e.underlay.clientWidth<e.underlay.scrollWidth&&(e.underlay.style.visibility="hidden",e.underlay.scrollLeft=e.input.scrollLeft,e.underlay.scrollTop=e.input.scrollTop,e.underlay.style.visibility="visible"),e.updateScrollDefer=null,e.hasFocus&&e.updateScroll()};t?null==this.updateScrollDefer&&(this.updateScrollDefer=requestAnimationFrame(n)):n()},t.prototype.setResult=function(t,e){this.result=t,this.updateInput(),this.updateHighlight(),i.isUndefined(e)&&null!=this.wordCompletion&&0==this.wordCompletion.indexOf(this.result.input)?this.updateWordCompletion():this.setWordCompletion(e),this.updateScroll()},t.prototype.setWordCompletion=function(t){null!=t&&0!=t.toLowerCase().indexOf(this.result.input.toLowerCase())&&(t=null),this.wordCompletion=t,this.updateWordCompletion(),this.updateScroll()},t.prototype.setCursor=function(t){if(this.input.focus(),this.input.createTextRange){var e=this.input.createTextRange();e.move("character",t),e.select()}else null!=this.input.selectionStart&&(this.input.focus(),this.input.setSelectionRange(t,t))},t.prototype.getCursor=function(){return this.input.selectionStart},t.prototype.setupHandler=function(){var t=this;this.input.onblur=function(){t.hasFocus=!1,setTimeout(function(){t.hasFocus||t.onblur&&t.onblur()},300),t.updateScroll()},this.input.onfocus=function(){t.hasFocus||(t.hasFocus=!0,t.updateScroll(),t.onfocus&&t.onfocus())},this.input.onkeydown=function(e){t.keydown(e)},this.input.onkeyup=function(e){t.keyup(e)},this.input.onclick=function(){t.onchangecursor()},this.input.oncut=function(){setTimeout(function(){t.onInputChange()})},this.input.onpaste=function(){setTimeout(function(){t.onInputChange()})}},t.prototype.addAccessibilitiesProperties=function(){this.input.spellcheck=!1,this.input.setAttribute("form","coveo-dummy-form"),this.input.setAttribute("role","combobox"),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("title",r.l("InsertAQuery")+". "+r.l("PressEnterToSend"))},t.prototype.focus=function(){var t=this;this.hasFocus=!0,setTimeout(function(){t.input.focus(),t.setCursor(t.getValue().length)})},t.prototype.blur=function(){this.hasFocus&&this.input.blur()},t.prototype.keydown=function(t){var e=this;switch(t.keyCode||t.which){case o.KEYBOARD.TAB:this.tabPress(),this.magicBox.clearSuggestion();break;default:t.stopPropagation(),null==this.onkeydown||this.onkeydown(t.keyCode||t.which)?requestAnimationFrame(function(){e.onInputChange()}):t.preventDefault()}},t.prototype.keyup=function(t){switch(t.keyCode||t.which){case 37:case 39:this.onchangecursor();break;default:null==this.onkeydown||this.onkeyup(t.keyCode||t.which)?this.onInputChange():t.preventDefault()}},t.prototype.tabPress=function(){this.ontabpress&&this.ontabpress(),this.onblur&&this.onblur()},t.prototype.onInputChange=function(){this.result.input!=this.input.value&&this.onchange(this.input.value,!1)},t.prototype.getValue=function(){return this.input.value},t.prototype.getWordCompletion=function(){return this.wordCompletion},t}();e.InputManager=u},357:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),i=n(0),o=function(){function t(t,e,n,o){var r=this;this.element=t,this.magicBoxContainer=e,this.inputManager=n,this.options=i.defaults(o,{selectableClass:"magic-box-suggestion",selectedClass:"magic-box-selected"}),void 0==this.options.timeout&&(this.options.timeout=500),this.hasSuggestions=!1,s.$$(this.element).on("mouseover",function(t){r.handleMouseOver(t)}),s.$$(this.element).on("mouseout",function(t){r.handleMouseOut(t)}),this.addAccessibilityProperties()}return t.prototype.handleMouseOver=function(t){var e=s.$$(t.target),n=e.parents(this.options.selectableClass);e.hasClass(this.options.selectableClass)?this.processMouseSelection(e.el):n.length>0&&this.element.contains(n[0])&&this.processMouseSelection(n[0])},t.prototype.handleMouseOut=function(t){var e=s.$$(t.target),n=e.parents(this.options.selectableClass);if(t.relatedTarget&&s.$$(t.relatedTarget).isValid()){var i=s.$$(t.relatedTarget).parents(this.options.selectableClass);e.hasClass(this.options.selectedClass)&&!s.$$(t.relatedTarget).hasClass(this.options.selectableClass)?this.removeSelectedStatus(e.el):0==i.length&&n.length>0&&this.removeSelectedStatus(n[0])}else e.hasClass(this.options.selectedClass)?this.removeSelectedStatus(e.el):n.length>0&&this.removeSelectedStatus(n[0])},t.prototype.moveDown=function(){return this.returnMoved(this.move("down"))},t.prototype.moveUp=function(){return this.returnMoved(this.move("up"))},t.prototype.selectAndReturnKeyboardFocusedElement=function(){var t=this.keyboardFocusedSuggestion;return null!=t&&(s.$$(t).trigger("keyboardSelect"),this.keyboardFocusedSuggestion=null),t},t.prototype.mergeSuggestions=function(t,e){var n,s=this,o=[],r=!0;t=i.compact(t);var u=this.pendingSuggestion=new Promise(function(e,a){i.each(t,function(t){var e=!1;setTimeout(function(){e=!0,r=!1},s.options.timeout),t.then(function(t){!e&&t&&(o=o.concat(t))})});var l=function(){r&&(n&&clearTimeout(n),0==o.length?e([]):u==s.pendingSuggestion||null==s.pendingSuggestion?e(o.sort(function(t,e){return e.index-t.index})):a("new request queued")),r=!1};0==t.length&&l(),void 0==t&&l(),n=setTimeout(function(){l()},s.options.timeout),Promise.all(t).then(function(){return l()})});u.then(function(t){return e&&e(t),s.updateSuggestions(t),t}).catch(function(){return null})},t.prototype.updateSuggestions=function(t){var e=this;if(s.$$(this.element).empty(),this.element.className="magic-box-suggestions",this.hasSuggestions=t.length>0,s.$$(this.element).toggleClass("magic-box-hasSuggestion",this.hasSuggestions),s.$$(this.magicBoxContainer).setAttribute("aria-expanded",this.hasSuggestions.toString()),this.hasSuggestions){var n=this.buildSuggestionsContainer();s.$$(this.element).append(n.el),i.each(t,function(s){var o=s.dom?e.modifyDomFromExistingSuggestion(s.dom):e.createDomFromSuggestion(s);o.setAttribute("id","magic-box-suggestion-"+i.indexOf(t,s)),o.setAttribute("role","option"),o.setAttribute("aria-selected","false"),o.suggestion=s,n.append(o.el)})}},t.prototype.processKeyboardSelection=function(t){this.addSelectedStatus(t),this.keyboardFocusedSuggestion=t,s.$$(this.inputManager.input).setAttribute("aria-activedescendant",s.$$(t).getAttribute("id"))},t.prototype.processMouseSelection=function(t){this.addSelectedStatus(t),this.keyboardFocusedSuggestion=null},t.prototype.buildSuggestionsContainer=function(){return s.$$("div",{id:"coveo-magicbox-suggestions",role:"listbox"})},t.prototype.createDomFromSuggestion=function(t){var e=s.$$("div",{className:"magic-box-suggestion "+this.options.selectableClass});if(e.on("click",function(){t.onSelect()}),e.on("keyboardSelect",function(){t.onSelect()}),t.html)return e.el.innerHTML=t.html,e;if(t.text)return e.text(t.text),e;if(t.separator){e.addClass("magic-box-suggestion-seperator");var n=s.$$("div",{className:"magic-box-suggestion-seperator-label"},t.separator);return e.append(n.el),e}return e},t.prototype.modifyDomFromExistingSuggestion=function(t){this.removeSelectedStatus(t);var e=s.$$(t).find("."+this.options.selectableClass);return this.removeSelectedStatus(e),s.$$(t)},t.prototype.move=function(t){var e=s.$$(this.element).find("."+this.options.selectedClass),n=s.$$(this.element).findAll("."+this.options.selectableClass),o=i.indexOf(n,e),r="up"==t?o-1:o+1;r<-1&&(r=n.length-1),r>n.length&&(r=0);var u=n[r];return u?this.processKeyboardSelection(u):(this.keyboardFocusedSuggestion=null,this.inputManager.input.removeAttribute("aria-activedescendant")),u},t.prototype.returnMoved=function(t){if(null!=t){if(t.suggestion)return t.suggestion;if(t["no-text-suggestion"])return null;if(t instanceof HTMLElement)return{text:s.$$(t).text()}}return null},t.prototype.addSelectedStatus=function(t){for(var e=this.element.getElementsByClassName(this.options.selectedClass),n=0;n<e.length;n++){var i=e.item(n);this.removeSelectedStatus(i)}s.$$(t).addClass(this.options.selectedClass),this.updateAreaSelectedIfDefined(t,"true")},t.prototype.removeSelectedStatus=function(t){s.$$(t).removeClass(this.options.selectedClass),this.updateAreaSelectedIfDefined(t,"false")},t.prototype.updateAreaSelectedIfDefined=function(t,e){s.$$(t).getAttribute("aria-selected")&&s.$$(t).setAttribute("aria-selected",e)},t.prototype.addAccessibilityProperties=function(){s.$$(this.magicBoxContainer).setAttribute("aria-expanded","false"),s.$$(this.magicBoxContainer).setAttribute("aria-haspopup","listbox"),this.inputManager.input.removeAttribute("aria-activedescendant")},t}();e.SuggestionsManager=o},358:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n(56),o=function(){function t(t){this.options=t}return t.queryIsBlocked=function(){return!!t.queryIsCurrentlyBlocked||(t.queryIsCurrentlyBlocked=!0,i.Defer.defer(function(){return t.allowDuplicateQuery()}),!1)},t.allowDuplicateQuery=function(){t.queryIsCurrentlyBlocked=!1},t.prototype.addParameters=function(e,n){t.queryIsBlocked()||(this.options.enableWildcards&&(e.enableWildcards=!0),this.options.enableQuestionMarks&&(e.enableQuestionMarks=!0),this.options.enableLowercaseOperators&&(e.enableLowercaseOperators=!0),s.isEmpty(n)||(e.enableQuerySyntax=this.options.enableQuerySyntax,e.expression.add(n),this.options.enablePartialMatch&&(e.enablePartialMatch=this.options.enablePartialMatch,this.options.partialMatchKeywords&&(e.partialMatchKeywords=this.options.partialMatchKeywords),this.options.partialMatchThreshold&&(e.partialMatchThreshold=this.options.partialMatchThreshold))))},t.queryIsCurrentlyBlocked=!1,t}();e.QueryboxQueryParameters=o},359:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(352),i=n(354),o=n(96),r=n(164),u=n(355);e.Complete={include:[s.NestedQuery,i.QueryExtension,u.SubExpression,r.Field,o.Basic]}},360:function(t,e,n){"use strict";function s(t,e,n,s){u.each(s.expressions,function(e){u.contains(t,e)||t.push(e)}),u.each(s.basicExpressions,function(t){u.contains(e,t)||e.push(t)}),u.each(s.grammars,function(t,e){if(e in n){if(!u.isArray(n[e])||!u.isArray(t))throw u.each(t,function(t){n[e].push(t)}),new Error("Can not merge "+e+"("+JSON.stringify(t)+" => "+JSON.stringify(n[e])+")");u.each(t,function(t){n[e].push(t)})}else n[e]=t})}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],i=[],o={Start:["Expressions","Empty"],Expressions:"[OptionalSpaces][Expression][ExpressionsList*][OptionalSpaces]",ExpressionsList:"[Spaces][Expression]",Expression:n,BasicExpression:i,OptionalSpaces:/ */,Spaces:/ +/,Empty:/(?!.)/},r=0;r<t.length;r++)s(n,i,o,t[r]),u.each(t[r].include,function(e){u.contains(t,e)||t.push(e)});return n.push("BasicExpression"),{start:"Start",expressions:o}}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.apply(this,t);return new r.Grammar(n.start,n.expressions)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(129),u=n(0);e.Expressions=i,e.ExpressionsGrammar=o},361:function(t,e,n){"use strict";var s=this&&this.__assign||Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),o=function(){function t(t){this.owner=t}return Object.defineProperty(t.prototype,"options",{get:function(){return this.owner.options},set:function(t){this.owner.options=t},enumerable:!0,configurable:!0}),t.prototype.postProcess=function(){this.options=s({},this.options,this.owner.componentOptionsModel.get(i.ComponentOptionsModel.attributesEnum.searchBox)),this.processQueryOnClearVersusEmptyQuery(),this.processQueryOnClearVersusSearchAsYouType()},t.prototype.processQueryOnClearVersusEmptyQuery=function(){this.options.triggerQueryOnClear&&!1===this.owner.searchInterface.options.allowQueriesWithoutKeywords&&(this.owner.logger.warn('Forcing option triggerQueryOnClear to false, as it is not supported when the search interface is configured to not allow queries without keywords (data-allow-queries-without-keywords="false")',this.owner),this.options.triggerQueryOnClear=!1)},t.prototype.processQueryOnClearVersusSearchAsYouType=function(){!0===this.owner.searchInterface.options.allowQueriesWithoutKeywords&&!1===this.options.triggerQueryOnClear&&!0===this.options.enableSearchAsYouType&&(this.owner.logger.warn("Forcing option triggerQueryOnClear to true, since search-as-you-type is enabled",this.owner),this.options.triggerQueryOnClear=!0)},t}();e.QueryboxOptionsProcessing=o},371:function(t,e){},40:function(t,e,n){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function s(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(163),o=n(162),r=n(0),u=function(){function t(t,e,n){var s=this;this.expression=e,this.input=n,r.isString(t)?this.value=t:r.isArray(t)&&(this.subResults=t,r.forEach(this.subResults,function(t){t.parent=s}))}return t.prototype.isSuccess=function(){return null!=this.value||null!=this.subResults&&r.all(this.subResults,function(t){return t.isSuccess()})},t.prototype.path=function(t){var e=null!=this.parent&&this.parent!=t?this.parent.path(t):[];return e.push(this),e},t.prototype.findParent=function(t){for(var e=this,n=r.isString(t)?function(e){return t==e.expression.id}:t;null!=e&&!n(e);)e=e.parent;return e},t.prototype.find=function(t){var e=r.isString(t)?function(e){return t==e.expression.id}:t;if(e(this))return this;if(this.subResults)for(var n=0;n<this.subResults.length;n++){var s=this.subResults[n].find(e);if(s)return s}return null},t.prototype.findAll=function(t){var e=[],n=r.isString(t)?function(e){return t==e.expression.id}:t;return n(this)&&e.push(this),this.subResults&&(e=r.reduce(this.subResults,function(t,e){return t.concat(e.findAll(n))},e)),e},t.prototype.resultAt=function(t,e){if(t<0||t>this.getLength())return[];if(null!=e){if(r.isString(e)){if(e==this.expression.id)return[this]}else if(e(this))return[this]}else{if(null!=(null==this.value&&null==this.subResults?this.input:this.value))return[this]}if(null!=this.subResults){for(var n=[],s=0;s<this.subResults.length;s++){var i=this.subResults[s];if(n=n.concat(i.resultAt(t,e)),(t-=i.getLength())<0)break}return n}return[]},t.prototype.getExpect=function(){return null==this.value&&null==this.subResults?[this]:null!=this.subResults?r.reduce(this.subResults,function(t,e){return t.concat(e.getExpect())},[]):[]},t.prototype.getBestExpect=function(){var t=this.getExpect(),e=r.groupBy(t,function(t){return t.input}),n=r.last(r.keys(e).sort(function(t,e){return e.length-t.length})),s=e[n],e=r.groupBy(s,function(t){return t.expression.id});return r.map(e,function(t){return r.chain(t).map(function(t){return{path:t.path().length,result:t}}).sortBy("path").pluck("result").first().value()})},t.prototype.getHumanReadableExpect=function(){var t=this.getBestExpect(),e=t.length>0?r.last(t).input:"";return"Expected "+r.map(t,function(t){return t.getHumanReadable()}).join(" or ")+" but "+(e.length>0?JSON.stringify(e[0]):"end of input")+" found."},t.prototype.before=function(){if(null==this.parent)return"";var t=r.indexOf(this.parent.subResults,this);return this.parent.before()+r.chain(this.parent.subResults).first(t).map(function(t){return t.toString()}).join("").value()},t.prototype.after=function(){if(null==this.parent)return"";var t=r.indexOf(this.parent.subResults,this);return r.chain(this.parent.subResults).last(this.parent.subResults.length-t-1).map(function(t){return t.toString()}).join("").value()+this.parent.after()},t.prototype.getLength=function(){return null!=this.value?this.value.length:null!=this.subResults?r.reduce(this.subResults,function(t,e){return t+e.getLength()},0):this.input.length},t.prototype.toHtmlElement=function(){var t=document.createElement("span"),e=null!=this.expression?this.expression.id:null;return null!=e&&t.setAttribute("data-id",e),t.setAttribute("data-success",this.isSuccess().toString()),null!=this.value?(t.appendChild(document.createTextNode(this.value)),t.setAttribute("data-value",this.value)):null!=this.subResults?r.each(this.subResults,function(e){t.appendChild(e.toHtmlElement())}):(t.appendChild(document.createTextNode(this.input)),t.setAttribute("data-input",this.input),t.className="magic-box-error"+(this.input.length>0?"":" magic-box-error-empty")),t.result=this,t},t.prototype.clean=function(e){if(null!=e||!this.isSuccess()){e=e||r.last(this.getBestExpect()).path(this);var n=r.first(e);if(null!=n){var s=r.indexOf(this.subResults,n),i=-1==s?[]:r.map(r.first(this.subResults,s),function(t){return t.clean()});return i.push(n.clean(r.rest(e))),new t(i,this.expression,this.input)}return new t(null,this.expression,this.input)}return null!=this.value?new t(this.value,this.expression,this.input):null!=this.subResults?new t(r.map(this.subResults,function(t){return t.clean()}),this.expression,this.input):void 0},t.prototype.clone=function(){return null!=this.value?new t(this.value,this.expression,this.input):null!=this.subResults?new t(r.map(this.subResults,function(t){return t.clone()}),this.expression,this.input):new t(null,this.expression,this.input)},t.prototype.toString=function(){return null!=this.value?this.value:null!=this.subResults?r.map(this.subResults,function(t){return t.toString()}).join(""):this.input},t.prototype.getHumanReadable=function(){return this.expression instanceof o.ExpressionConstant?JSON.stringify(this.expression.value):this.expression.id},t}();e.Result=u;var a=function(t){function e(e){var n=t.call(this,[e],i.ExpressionEndOfInput,e.input)||this,s=new u(null,i.ExpressionEndOfInput,e.input.substr(e.getLength()));return s.parent=n,n.subResults.push(s),n}return s(e,t),e}(u);e.EndOfInputResult=a},402:function(t,e,n){"use strict";function s(){i.exportGlobally({MagicBox:{EndOfInputResult:x.EndOfInputResult,ExpressionConstant:o.ExpressionConstant,ExpressionEndOfInput:r.ExpressionEndOfInput,ExpressionFunction:u.ExpressionFunction,ExpressionList:a.ExpressionList,ExpressionOptions:l.ExpressionOptions,ExpressionRef:c.ExpressionRef,ExpressionRegExp:p.ExpressionRegExp,Grammar:h.Grammar,Grammars:d.Grammars,InputManager:g.InputManager,Instance:f.MagicBoxInstance,OptionResult:m.OptionResult,RefResult:b.RefResult,Result:x.Result,SuggestionsManager:v.SuggestionsManager,Utils:y.MagicBoxUtils,create:f.createMagicBox,requestAnimationFrame:f.requestAnimationFrame}})}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(162),r=n(163),u=n(345),a=n(346),l=n(347),c=n(349),p=n(351),h=n(129),d=n(403),g=n(356),f=n(166),y=n(167),m=n(348),b=n(350),x=n(40),v=n(357);e.GrammarsImportedLocally=d.Grammars,e.doMagicBoxExport=s},403:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(96),i=n(359),o=n(353),r=n(360),u=n(164),a=n(352),l=n(354),c=n(355);e.Grammars={Basic:s.Basic,notInWord:s.notInWord,notWordStart:s.notWordStart,Complete:i.Complete,Date:o.Date,Expressions:r.Expressions,ExpressionsGrammar:r.ExpressionsGrammar,Field:u.Field,NestedQuery:a.NestedQuery,QueryExtension:l.QueryExtension,SubExpression:c.SubExpression}},404:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),i=n(7),o=n(17),r=function(){function t(t){this.element=s.$$("div",{className:"magic-box-clear"});var e=s.$$("div",{className:"magic-box-icon"});this.element.append(e.el),this.element.insertAfter(s.$$(t.element).find("input")),(new o.AccessibleButton).withElement(this.element).withLabel(i.l("Clear")).withSelectAction(function(){return t.clear()}).build(),this.toggleTabindex(!1)}return t.prototype.toggleTabindex=function(t){var e=t?"0":"-1";this.element.setAttribute("tabindex",e)},t}();e.MagicBoxClear=r},96:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(40),i=n(40);e.notWordStart=" ()[],$@'\"",e.notInWord=" ()[],:",e.Basic={basicExpressions:["Word","DoubleQuoted"],grammars:{DoubleQuoted:'"[NotDoubleQuote]"',NotDoubleQuote:/[^"]*/,SingleQuoted:"'[NotSingleQuote]'",NotSingleQuote:/[^']*/,Number:/-?(0|[1-9]\d*)(\.\d+)?/,Word:function(t,n,o){var r=new RegExp("[^"+e.notWordStart.replace(/(.)/g,"\\$1")+"][^"+e.notInWord.replace(/(.)/g,"\\$1")+"]*"),u=t.match(r);null!=u&&0!=u.index&&(u=null);var a=new s.Result(null!=u?u[0]:null,o,t);return a.isSuccess()&&n&&t.length>a.value.length?new i.EndOfInputResult(a):a}}}}});