{"version":3,"sources":["./src/utils/SVGDom.ts","./src/ui/ResultTagging/ResultTagging.ts","./sass/_ResultTagging.scss"],"names":[],"mappings":"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","file":"ResultTagging__5d8084491af1464dbdb6.js","sourcesContent":["import { IStringMap } from '../rest/GenericParam';\nimport * as _ from 'underscore';\n\nexport class SVGDom {\n  public static addClassToSVGInContainer(svgContainer: HTMLElement, classToAdd: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', `${SVGDom.getClass(svgElement)}${classToAdd}`);\n  }\n\n  public static removeClassFromSVGInContainer(svgContainer: HTMLElement, classToRemove: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', SVGDom.getClass(svgElement).replace(classToRemove, ''));\n  }\n\n  public static addStyleToSVGInContainer(svgContainer: HTMLElement, styleToAdd: IStringMap<any>) {\n    const svgElement = svgContainer.querySelector('svg');\n    _.each(styleToAdd, (styleValue, styleKey) => {\n      svgElement.style[styleKey] = styleValue;\n    });\n  }\n\n  private static getClass(svgElement: SVGElement) {\n    const className = svgElement.getAttribute('class');\n    return className ? className + ' ' : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SVGDom.ts","import 'styling/_ResultTagging';\nimport * as _ from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\nimport { Assert } from '../../misc/Assert';\nimport { QueryStateModel } from '../../models/QueryStateModel';\nimport { IFieldDescription } from '../../rest/FieldDescription';\nimport { IIndexFieldValue } from '../../rest/FieldValue';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { ITaggingRequest } from '../../rest/TaggingRequest';\nimport { l } from '../../strings/Strings';\nimport { $$ } from '../../utils/Dom';\nimport { KEYBOARD, KeyboardUtils } from '../../utils/KeyboardUtils';\nimport { StringUtils } from '../../utils/StringUtils';\nimport { SVGDom } from '../../utils/SVGDom';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { Utils } from '../../utils/Utils';\nimport { analyticsActionCauseList } from '../Analytics/AnalyticsActionListMeta';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions, IFieldOption } from '../Base/ComponentOptions';\nimport { Initialization } from '../Base/Initialization';\n\nexport interface IResultTaggingOptions {\n  field: IFieldOption;\n  suggestBoxSize?: number;\n  autoCompleteTimer?: number;\n}\n\nexport interface IAnalyticsResultTaggingMeta {\n  facetId: string;\n  facetField: string;\n  facetValue?: string;\n  facetTitle?: string;\n}\n\n/**\n * The ResultTagging component lists the current tag field values of its associated result and renders a control that\n * allows the end user to add values to a tag field.\n *\n * This component is a result template component (see [Result Templates](https://developers.coveo.com/x/aIGfAQ)).\n *\n * **Note:**\n * > The ResultTagging component is not supported with Coveo Cloud V2. To implement the ResultTagging component in Coveo Cloud V1, contact [Coveo Support](https://support.coveo.com/s/).\n *\n * @notSupportedIn salesforcefree\n */\nexport class ResultTagging extends Component {\n  static ID = 'ResultTagging';\n  static autoCompleteClass = 'coveo-result-tagging-auto-complete';\n\n  static doExport = () => {\n    exportGlobally({\n      ResultTagging: ResultTagging\n    });\n  };\n\n  /**\n   * @componentOptions\n   */\n  static options: IResultTaggingOptions = {\n    /**\n     * Specifies the tag field that the component will use.\n     *\n     * Specifying a value for this options is necessary for this component to work.\n     */\n    field: ComponentOptions.buildFieldOption({\n      match: (field: IFieldDescription) => field.type == 'Tag',\n      required: true\n    }),\n\n    /**\n     * Specifies the number of items to show in the list of suggested items.\n     *\n     * Default value is `5`. Minimum value is `0 `.\n     */\n    suggestBoxSize: ComponentOptions.buildNumberOption({ defaultValue: 5, min: 0 }),\n\n    /**\n     * Specifies how much time (in milliseconds) it takes for the list of suggested items to disappear when it loses\n     * focus.\n     *\n     * Default value is `2000`. Minimum value is `0`.\n     */\n    autoCompleteTimer: ComponentOptions.buildNumberOption({ defaultValue: 2000, min: 0 })\n  };\n\n  static AUTO_COMPLETE_CLASS = 'coveo-result-tagging-auto-complete';\n\n  private autoCompleteZone: HTMLElement;\n  private textBox: HTMLInputElement;\n  private autoCompletePopup: HTMLElement;\n  private tagZone: HTMLElement;\n  private tags: string[];\n\n  /**\n   * Creates a new ResultTagging component.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the ResultTagging component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(\n    public element: HTMLElement,\n    public options?: IResultTaggingOptions,\n    bindings?: IComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, ResultTagging.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(element, ResultTagging, options);\n    this.result = result || this.resolveResult();\n    Assert.exists(this.componentOptionsModel);\n    Assert.exists(this.result);\n\n    if (!this.options.field) {\n      this.logger.error('You must specify a field to the ResultTagging component');\n      return;\n    }\n    let fieldValue = Utils.getFieldValue(this.result, <string>this.options.field);\n    if (fieldValue && Utils.isNonEmptyString(fieldValue)) {\n      this.tags = fieldValue.split(';');\n    } else if (fieldValue && Utils.isNonEmptyArray(fieldValue)) {\n      this.tags = fieldValue;\n    } else {\n      this.tags = [];\n    }\n    this.tags = _.map(this.tags, t => {\n      return t.trim();\n    });\n    this.tagZone = $$('div', {\n      className: 'coveo-result-tagging-tag-zone'\n    }).el;\n    element.appendChild(this.tagZone);\n    element.appendChild(this.buildTagIcon());\n\n    this.autoCompleteZone = $$('div', {\n      className: 'coveo-result-tagging-auto-complete-zone'\n    }).el;\n    element.appendChild(this.autoCompleteZone);\n    this.autoCompleteZone.appendChild(this.buildTextBox());\n    this.autoCompleteZone.appendChild(this.buildAddIcon());\n    this.autoCompleteZone.appendChild(this.buildClearIcon());\n    this.buildExistingTags();\n  }\n\n  private buildExistingTags() {\n    if (this.tags) {\n      _.each(this.tags, (tag: string) => {\n        this.tagZone.appendChild(this.buildTagValue(tag));\n      });\n    }\n  }\n\n  private buildTagIcon(): HTMLElement {\n    let tagZone = $$('div', {\n      className: 'coveo-result-tagging-add-tag'\n    });\n    let tagTextBox = $$('span', {\n      className: 'coveo-result-tagging-add-tag-text'\n    });\n    tagTextBox.text(l('EnterTag'));\n    let tagIcon = $$('span', {\n      className: 'coveo-result-tagging-add-tag-icon'\n    });\n    tagIcon.on('click', () => {\n      _.defer(() => {\n        this.focusOnTextBox();\n      }, 20);\n    });\n    tagZone.el.appendChild(tagIcon.el);\n    tagZone.append(tagTextBox.el);\n    tagZone.setAttribute('title', l('EnterTag'));\n    return tagZone.el;\n  }\n\n  private focusOnTextBox() {\n    this.textBox.focus();\n  }\n\n  private buildTagValue(tagValue: string): HTMLElement {\n    let tag = $$('div', {\n      className: 'coveo-result-tagging-coveo-tag'\n    });\n    tag.el.appendChild(this.buildShortenedTagWithTitle(tagValue));\n    let deleteIcon = $$(\n      'span',\n      {\n        className: 'coveo-result-tagging-delete-icon'\n      },\n      SVGIcons.icons.checkboxHookExclusionMore\n    );\n    SVGDom.addClassToSVGInContainer(deleteIcon.el, 'coveo-result-tagging-delete-icon-svg');\n    tag.el.appendChild(deleteIcon.el);\n    deleteIcon.on('click', () => {\n      this.doRemoveTag(tag.el, tagValue.toLowerCase());\n    });\n    return tag.el;\n  }\n\n  private buildShortenedTagWithTitle(tagValue: string): HTMLElement {\n    let shortenedTag = StringUtils.removeMiddle(tagValue, 16, '...');\n    let clickableValue = $$('a', {\n      title: tagValue,\n      href: 'javascript:void(0);'\n    });\n    clickableValue.text(shortenedTag);\n\n    this.bindFacetEventOnValue(clickableValue.el, tagValue);\n    return clickableValue.el;\n  }\n\n  private buildTextBox(): HTMLInputElement {\n    this.textBox = <HTMLInputElement>$$('input', {\n      type: 'text',\n      className: 'coveo-add-tag-textbox',\n      placeholder: l('EnterTag')\n    }).el;\n\n    this.autoCompletePopup = $$('div', {\n      className: ResultTagging.autoCompleteClass\n    }).el;\n    this.autoCompleteZone.appendChild(this.autoCompletePopup);\n    this.manageAutocompleteAutoHide();\n    $$(this.textBox).on('keyup', (e: KeyboardEvent) => {\n      if (e.keyCode == KEYBOARD.UP_ARROW || e.keyCode == KEYBOARD.DOWN_ARROW || e.keyCode == KEYBOARD.ENTER) {\n        this.manageUpDownEnter(e.keyCode);\n      } else if (!KeyboardUtils.isArrowKeyPushed(e.keyCode)) {\n        this.populateSuggestions();\n      }\n      $$(this.element).removeClass('coveo-error');\n    });\n    $$(this.textBox).on('click', () => {\n      this.populateSuggestions();\n    });\n    return this.textBox;\n  }\n\n  private buildAddIcon(): HTMLElement {\n    let icon = $$(\n      'div',\n      {\n        className: 'coveo-result-tagging-add-tag-tick-icon'\n      },\n      SVGIcons.icons.taggingOk\n    );\n    SVGDom.addClassToSVGInContainer(icon.el, 'coveo-result-tagging-add-tag-tick-icon-svg');\n    let clickable = $$('span');\n    clickable.on('click', () => {\n      this.doAddTag();\n    });\n    icon.el.appendChild(clickable.el);\n    return icon.el;\n  }\n\n  private buildClearIcon(): HTMLElement {\n    let icon = $$(\n      'div',\n      {\n        className: 'coveo-result-tagging-clear-icon'\n      },\n      SVGIcons.icons.checkboxHookExclusionMore\n    );\n    SVGDom.addClassToSVGInContainer(icon.el, 'coveo-result-tagging-clear-icon-svg');\n    let clickable = $$('span');\n    clickable.on('click', () => {\n      this.textBox.value = '';\n    });\n    icon.el.appendChild(clickable.el);\n    return icon.el;\n  }\n\n  private bindFacetEventOnValue(element: HTMLElement, value: string) {\n    let facetAttributeName = QueryStateModel.getFacetId(<string>this.options.field);\n    let facetModel: string[] = this.queryStateModel.get(facetAttributeName);\n    let facets: Component[] = this.componentStateModel.get(facetAttributeName);\n    let atLeastOneFacetIsEnabled = _.filter(facets, (value: Component) => !value.disabled).length > 0;\n\n    if (facetModel != null && atLeastOneFacetIsEnabled) {\n      $$(element).on('click', () => {\n        if (_.contains(facetModel, value)) {\n          this.queryStateModel.set(facetAttributeName, _.without(facetModel, value));\n        } else {\n          this.queryStateModel.set(facetAttributeName, _.union(facetModel, [value]));\n        }\n        this.queryController.deferExecuteQuery({\n          beforeExecuteQuery: () =>\n            this.usageAnalytics.logSearchEvent<IAnalyticsResultTaggingMeta>(analyticsActionCauseList.documentTag, {\n              facetId: <string>this.options.field,\n              facetField: <string>this.options.field,\n              facetValue: value\n            })\n        });\n      });\n\n      if (_.contains(facetModel, value)) {\n        $$(element).addClass('coveo-selected');\n      }\n      $$(element).addClass('coveo-clickable');\n    }\n  }\n\n  private clearPopup() {\n    $$(this.autoCompletePopup).hide();\n    $$(this.autoCompletePopup).empty();\n  }\n\n  private showPopup() {\n    $$(this.autoCompletePopup).show();\n  }\n\n  private populateSuggestions() {\n    let endpoint = this.queryController.getEndpoint();\n    let searchText = this.textBox.value;\n    let searchOptions = {\n      field: <string>this.options.field,\n      ignoreAccents: true,\n      sortCriteria: 'occurences',\n      maximumNumberOfValues: this.options.suggestBoxSize,\n      queryOverride: '@uri',\n      pattern: this.buildRegEx(searchText),\n      patternType: 'RegularExpression'\n    };\n    endpoint.listFieldValues(searchOptions).then((fieldValues: IIndexFieldValue[]) => {\n      this.clearPopup();\n      _.each(fieldValues, (fieldValue: IIndexFieldValue) => {\n        this.autoCompletePopup.appendChild(this.buildSelectableValue(fieldValue.lookupValue));\n      });\n      this.showPopup();\n      this.autoCompletePopup.style.width = this.textBox.offsetWidth + ' px';\n    });\n  }\n\n  private manageAutocompleteAutoHide() {\n    let timeout: any;\n\n    $$(this.textBox).on('mouseover', () => {\n      clearTimeout(timeout);\n    });\n\n    $$(this.autoCompletePopup).on('mouseout', e => {\n      if ($$(<HTMLElement>e.target).hasClass(ResultTagging.autoCompleteClass)) {\n        timeout = setTimeout(() => {\n          this.clearPopup();\n        }, this.options.autoCompleteTimer);\n      }\n    });\n\n    $$(this.autoCompletePopup).on('mouseenter', () => {\n      clearTimeout(timeout);\n    });\n\n    $$(this.element).on('mouseenter', () => {\n      this.clearPopup();\n      $$(this.element).addClass('coveo-opened');\n    });\n\n    $$($$(this.element).closest('.CoveoResult')).on('mouseleave', () => {\n      this.clearPopup();\n      if (this.textBox.value == '') {\n        $$(this.element).removeClass('coveo-opened');\n      }\n    });\n\n    $$($$(this.element).closest('.CoveoResult')).on('focusout', e => {\n      if (this.textBox.value != '' && $$(<HTMLElement>e.target).closest('.CoveoResult') != $$(this.element).closest('.CoveoResult')) {\n        $$(this.element).addClass('coveo-error');\n      }\n    });\n\n    $$($$(this.element).closest('.CoveoResult')).on('focusin', () => {\n      $$(this.element).removeClass('coveo-error');\n    });\n  }\n\n  // Exclude tags that are already on the result (Since we can tag with the same value twice.\n  private buildRegEx(searchTerm: string) {\n    return '(?=.*' + searchTerm + ')' + _.map(this.tags, (tag: string) => this.buildTermToExclude(tag)).join('') + '.*';\n  }\n\n  private buildTermToExclude(term: string) {\n    return '(?!^' + term + '$)';\n  }\n\n  private manageUpDownEnter(code: number) {\n    let selectableArray = $$(this.element).findAll('.coveo-selectable');\n    if (code == KEYBOARD.ENTER) {\n      this.doAddTag();\n      return;\n    }\n\n    if (selectableArray.length > 0) {\n      let newIndex = this.computeNextIndex(code, selectableArray);\n      newIndex = Math.max(0, newIndex);\n      newIndex = Math.min(selectableArray.length - 1, newIndex);\n      let selected = $$(selectableArray[newIndex]);\n      selected.addClass('coveo-selected');\n      this.textBox.value = selected.text();\n    }\n  }\n\n  private computeNextIndex(code: number, selectableArray: HTMLElement[]): number {\n    let nextIndex = 0;\n    _.each(selectableArray, (selectable: HTMLElement, index) => {\n      if ($$(selectable).hasClass('coveo-selected')) {\n        if (code == KEYBOARD.UP_ARROW) {\n          nextIndex = index - 1;\n        } else if (code == KEYBOARD.DOWN_ARROW) {\n          nextIndex = index + 1;\n        }\n        $$(selectable).removeClass('coveo-selected');\n      }\n    });\n    return nextIndex;\n  }\n\n  private buildSelectableValue(lookupValue: string): HTMLElement {\n    let line = $$('div', {\n      className: 'coveo-selectable'\n    });\n    line.el.appendChild(this.buildShortenedTagWithTitle(lookupValue));\n    line.on('click', () => {\n      this.doAddTagWithValue(lookupValue);\n    });\n    return line.el;\n  }\n\n  private doRemoveTag(element: HTMLElement, tagValue: string) {\n    let request: ITaggingRequest = {\n      fieldName: <string>this.options.field,\n      fieldValue: tagValue,\n      doAdd: false,\n      uniqueId: this.result.uniqueId\n    };\n    this.queryController\n      .getEndpoint()\n      .tagDocument(request)\n      .then(() => {\n        this.tags.splice(_.indexOf(this.tags, tagValue), 1);\n        $$(element).detach();\n      });\n  }\n\n  private doAddTagWithValue(tagValue: string) {\n    _.each(tagValue.split(','), (tag: string) => {\n      this.doAddSingleTagValue(tag);\n    });\n  }\n\n  private doAddSingleTagValue(tagValue: string) {\n    this.clearPopup();\n    if (_.indexOf(this.tags, tagValue) > -1) {\n      $$(this.element).addClass('coveo-error');\n      return;\n    }\n    this.tags.push(tagValue);\n    let request: ITaggingRequest = {\n      fieldName: <string>this.options.field,\n      fieldValue: tagValue,\n      doAdd: true,\n      uniqueId: this.result.uniqueId\n    };\n    this.queryController\n      .getEndpoint()\n      .tagDocument(request)\n      .then(() => {\n        this.tagZone.appendChild(this.buildTagValue(tagValue));\n        this.textBox.value = '';\n        $$(this.element).removeClass('coveo-error');\n      })\n      .catch(() => {\n        // We do this otherwise it's possible to add the same tag while we wait for the server's response\n        this.tags = _.without(this.tags, _.findWhere(this.tags, tagValue));\n      });\n  }\n\n  private doAddTag() {\n    let tagValue = Utils.trim(this.textBox.value.toLowerCase());\n    this.doAddTagWithValue(tagValue);\n  }\n}\nInitialization.registerAutoCreateComponent(ResultTagging);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultTagging/ResultTagging.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultTagging.scss\n// module id = 492\n// module chunks = 44 77"],"sourceRoot":""}