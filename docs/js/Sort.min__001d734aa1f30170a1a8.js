webpackJsonpCoveo__temporary([23],{14:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){function t(){}return t.addClassToSVGInContainer=function(e,r){var i=e.querySelector("svg");i.setAttribute("class",""+t.getClass(i)+r)},t.removeClassFromSVGInContainer=function(e,r){var i=e.querySelector("svg");i.setAttribute("class",t.getClass(i).replace(r,""))},t.addStyleToSVGInContainer=function(t,e){var r=t.querySelector("svg");i.each(e,function(t,e){r.style[e]=t})},t.getClass=function(t){var e=t.getAttribute("class");return e?e+" ":""},t}();e.SVGDom=n},210:function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),r(446);var n=r(0),o=r(3),s=r(10),a=r(5),c=r(16),u=r(12),l=r(2),d=r(20),p=r(14),h=r(13),f=r(4),C=r(84),y=r(6),v=r(7),g=r(1),S=r(326),m=function(t){function e(r,i,n){var o=t.call(this,r,e.ID,n)||this;o.element=r,o.options=i,o.options=v.ComponentOptions.initComponentOptions(r,e,i),a.Assert.isLargerOrEqualsThan(1,o.options.sortCriteria.length),o.bind.onQueryState(c.MODEL_EVENTS.CHANGE_ONE,u.QUERY_STATE_ATTRIBUTES.SORT,function(t){return o.handleQueryStateChanged(t)}),o.bind.onRootElement(s.QueryEvents.querySuccess,function(t){return o.handleQuerySuccess(t)}),o.bind.onRootElement(s.QueryEvents.buildingQuery,function(t){return o.handleBuildingQuery(t)}),o.bind.onRootElement(s.QueryEvents.queryError,function(t){return o.handleQueryError(t)});var C=function(){return o.handleClick()};if(o.bind.on(o.element,"click",C),o.bind.on(o.element,"keyup",d.KeyboardUtils.keypressAction(d.KEYBOARD.ENTER,C)),o.element.setAttribute("tabindex","0"),f.Utils.isNonEmptyString(o.options.caption)&&l.$$(o.element).text(o.options.caption),o.isToggle()){o.icon=l.$$("span",{className:"coveo-icon"}).el;var y=l.$$("span",{className:"coveo-sort-icon-ascending"},h.SVGIcons.icons.arrowUp);p.SVGDom.addClassToSVGInContainer(y.el,"coveo-sort-icon-ascending-svg");var g=l.$$("span",{className:"coveo-sort-icon-descending"},h.SVGIcons.icons.arrowDown);p.SVGDom.addClassToSVGInContainer(g.el,"coveo-sort-icon-descending-svg"),o.icon.appendChild(y.el),o.icon.appendChild(g.el),o.element.appendChild(o.icon)}return o.update(),o.updateAppearance(),o}return i(e,t),e.prototype.select=function(t){if(t)this.currentCriteria=n.find(this.options.sortCriteria,function(e){return e.direction==t});else if(f.Utils.exists(this.currentCriteria)){var e=n.indexOf(this.options.sortCriteria,this.currentCriteria);a.Assert.check(e>=0),this.currentCriteria=this.options.sortCriteria[(e+1)%this.options.sortCriteria.length]}else this.currentCriteria=this.options.sortCriteria[0];this.queryStateModel.set(u.QueryStateModel.attributesEnum.sort,this.currentCriteria.toString())},e.prototype.enable=function(){l.$$(this.element).removeClass("coveo-tab-disabled"),this.update(),t.prototype.enable.call(this)},e.prototype.disable=function(){l.$$(this.element).addClass("coveo-tab-disabled"),t.prototype.disable.call(this)},e.prototype.getCurrentCriteria=function(){return this.currentCriteria},e.prototype.match=function(t){return n.any(this.options.sortCriteria,function(e){return t==e.toString()})},e.prototype.handleQueryStateChanged=function(t){this.update()},e.prototype.update=function(){var t=this.queryStateModel.get(u.QueryStateModel.attributesEnum.sort);if(f.Utils.isNonEmptyString(t)){var e=S.SortCriteria.parse(t);this.currentCriteria=n.find(this.options.sortCriteria,function(t){return e.equals(t)})}else this.currentCriteria=null;this.updateAppearance()},e.prototype.handleBuildingQuery=function(t){a.Assert.exists(t),(this.queryStateModel.get(u.QueryStateModel.attributesEnum.sort)==u.QueryStateModel.defaultAttributes.sort||this.isSelected())&&this.currentCriteria&&this.currentCriteria.putInQueryBuilder(t.queryBuilder)},e.prototype.handleQuerySuccess=function(t){0==t.results.results.length?l.$$(this.element).addClass("coveo-sort-hidden"):l.$$(this.element).removeClass("coveo-sort-hidden")},e.prototype.handleQueryError=function(t){l.$$(this.element).addClass("coveo-sort-hidden")},e.prototype.handleClick=function(){var t=this,e=this.currentCriteria;this.select(),e!=this.currentCriteria&&this.queryController.deferExecuteQuery({beforeExecuteQuery:function(){return C.logSortEvent(t.usageAnalytics,t.currentCriteria.sort+t.currentCriteria.direction)}})},e.prototype.isToggle=function(){return this.options.sortCriteria.length>1},e.prototype.isSelected=function(){return f.Utils.exists(this.currentCriteria)},e.prototype.updateAppearance=function(){if(l.$$(this.element).toggleClass("coveo-selected",this.isSelected()),this.isToggle()){var t=this.currentCriteria?this.currentCriteria.direction:this.options.sortCriteria[0].direction;l.$$(this.element).removeClass("coveo-ascending"),l.$$(this.element).removeClass("coveo-descending"),this.isSelected()&&l.$$(this.element).addClass("ascending"===t?"coveo-ascending":"coveo-descending")}},e.ID="Sort",e.doExport=function(){o.exportGlobally({Sort:e,SortCriteria:S.SortCriteria})},e.options={sortCriteria:v.ComponentOptions.buildCustomListOption(function(t){return n.map(t,function(t){return"string"==typeof t?new S.SortCriteria(t):t})},{required:!0}),caption:v.ComponentOptions.buildLocalizedStringOption({required:!0})},e}(y.Component);e.Sort=m,g.Initialization.registerAutoCreateComponent(m)},326:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=r(0),o=r(5);!function(t){t.RELEVANCY="relevancy",t.DATE="date",t.QRE="qre"}(i=e.VALID_SORT||(e.VALID_SORT={}));var s;!function(t){t.ASCENDING="ascending",t.DESCENDING="descending"}(s=e.VALID_DIRECTION||(e.VALID_DIRECTION={}));var a=function(){function t(e,r){void 0===r&&(r=""),this.sort=e,this.direction=r,t.sortIsField(e)||o.Assert.check(this.isValidSort(e),e+" is not a valid sort criteria. Valid values are "+n.values(i)+" or a valid index sortable index field."),t.sortNeedsDirection(e)?o.Assert.check(this.isValidDirection(r),r+" is not a valid sort criteria direction. Valid values are "+n.values(s)):o.Assert.check(""==r)}return t.prototype.isValidDirection=function(t){return n.chain(s).values().contains(t).value()},t.prototype.isValidSort=function(t){return n.chain(i).values().contains(t).value()},t.sortIsField=function(t){return"@"==t.charAt(0)},t.sortNeedsDirection=function(e){return n.contains(t.sortsNeedingDirection,e)||t.sortIsField(e)},t.sortsNeedingDirection=[i.DATE],t}();e.SortCriterion=a;var c=function(){function t(t){var e=this;this.criteria=[],t.split(";").forEach(function(t){var r=t.match(/\S+/g);e.criteria.push(new a(r[0],r[1]))})}return Object.defineProperty(t.prototype,"direction",{get:function(){return n.first(this.criteria).direction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return n.first(this.criteria).sort},enumerable:!0,configurable:!0}),t.parse=function(e){return new t(e)},t.prototype.putInQueryBuilder=function(t){o.Assert.exists(t),t.sortCriteria=this.toString().split(";").join(",")},t.prototype.toString=function(){return this.criteria.map(function(t){return t.direction?t.sort+" "+t.direction:""+t.sort}).join(";")},t.prototype.equals=function(t){return t.toString()==this.toString()},t}();e.SortCriteria=c},446:function(t,e){}});