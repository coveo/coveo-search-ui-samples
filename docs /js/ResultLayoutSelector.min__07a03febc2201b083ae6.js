webpackJsonpCoveo__temporary([21],{14:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),i=function(){function e(){}return e.addClassToSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",""+e.getClass(n)+o)},e.removeClassFromSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",e.getClass(n).replace(o,""))},e.addStyleToSVGInContainer=function(e,t){var o=e.querySelector("svg");n.each(t,function(e,t){o.style[t]=e})},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=i},147:function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),o(474);var i=o(0),s=o(16),r=o(10),a=o(100),u=o(29),c=o(5),l=o(15),h=o(12),p=o(3),d=o(7),y=o(1),f=o(14),v=o(13),m=o(4),b=o(9),L=o(6),A=o(8),C=o(2),g=o(475),S=o(17);t.defaultLayout="list";var R=function(e){function t(o,n,i){var a=e.call(this,o,t.ID,i)||this;return a.element=o,a.options=n,a.options=A.ComponentOptions.initComponentOptions(o,t,n),a.currentActiveLayouts={},a.bind.onQueryState(l.MODEL_EVENTS.CHANGE_ONE,h.QUERY_STATE_ATTRIBUTES.LAYOUT,a.handleQueryStateChanged.bind(a)),a.bind.onRootElement(r.QueryEvents.querySuccess,function(e){return a.handleQuerySuccess(e)}),a.bind.onRootElement(r.QueryEvents.queryError,function(e){return a.handleQueryError(e)}),a.resultLayoutSection=y.$$(a.element).closest(".coveo-result-layout-section"),a.bind.oneRootElement(s.InitializationEvents.afterComponentsInitialization,function(){return a.populate()}),a.bind.oneRootElement(s.InitializationEvents.afterInitialization,function(){return a.handleQueryStateChanged()}),g.ResponsiveResultLayout.init(a.root,a,{}),a}return n(t,e),Object.defineProperty(t.prototype,"activeLayouts",{get:function(){return this.currentActiveLayouts},enumerable:!0,configurable:!0}),t.prototype.changeLayout=function(e){if(c.Assert.check(this.isLayoutDisplayedByButton(e),"Layout not available or invalid"),e!==this.currentLayout||""===this.getModelValue()){this.setModelValue(e);var t=this.queryController.getLastResults();this.setLayout(e,t),t?this.usageAnalytics.logCustomEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:e},this.element):(this.usageAnalytics.logSearchEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:e}),this.queryController.firstQuery||this.queryController.executeQuery())}},t.prototype.getCurrentLayout=function(){return this.currentLayout},t.prototype.disableLayouts=function(e){var t=this;if(m.Utils.isNonEmptyArray(e)){i.each(e,function(e){return t.disableLayout(e)});var o=i.difference(i.keys(this.currentActiveLayouts),e);if(i.isEmpty(o)){this.logger.error("Cannot disable the last valid layout ... Re-enabling the first one possible");var n=i.keys(this.currentActiveLayouts)[0];this.enableLayout(n),this.setLayout(n)}else{var s=i.contains(o,this.currentLayout)?this.currentLayout:o[0];this.changeLayout(s)}}},t.prototype.enableLayouts=function(e){var t=this;i.each(e,function(e){t.enableLayout(e)})},t.prototype.disableLayout=function(e){this.isLayoutDisplayedByButton(e)&&this.hideButton(e)},t.prototype.enableLayout=function(e){var t=this.resultLists;i.find(t,function(t){return t.options.layout==e})&&this.isLayoutDisplayedByButton(e)&&(this.showButton(e),this.updateSelectorAppearance())},Object.defineProperty(t.prototype,"resultLists",{get:function(){return this.searchInterface.getComponents("ResultList")},enumerable:!0,configurable:!0}),t.prototype.hideButton=function(e){if(this.isLayoutDisplayedByButton(e)){var t=this.currentActiveLayouts[e].button;y.$$(t.el).addClass("coveo-hidden"),t.visible=!1,this.updateSelectorAppearance()}},t.prototype.showButton=function(e){if(this.isLayoutDisplayedByButton(e)){var t=this.currentActiveLayouts[e].button;y.$$(t.el).removeClass("coveo-hidden"),t.visible=!0}},t.prototype.setLayout=function(e,t){e&&(this.currentLayout&&y.$$(this.currentActiveLayouts[this.currentLayout].button.el).removeClass("coveo-selected"),y.$$(this.currentActiveLayouts[e].button.el).addClass("coveo-selected"),this.currentLayout=e,y.$$(this.element).trigger(u.ResultListEvents.changeLayout,{layout:e,results:t}))},t.prototype.handleQuerySuccess=function(e){this.hasNoResults=0==e.results.results.length,this.shouldShowSelector()?this.show():this.hide()},t.prototype.handleQueryStateChanged=function(e){var t=this.getModelValue(),o=i.find(i.keys(this.currentActiveLayouts),function(e){return e===t});void 0!==o?this.setLayout(o):this.setLayout(i.keys(this.currentActiveLayouts)[0])},t.prototype.handleQueryError=function(e){this.hasNoResults=!0,this.hide()},t.prototype.updateSelectorAppearance=function(){this.shouldShowSelector()?this.show():this.hide()},t.prototype.populate=function(){var e=this,o={layouts:[]};y.$$(this.root).trigger(a.ResultLayoutEvents.populateResultLayout,o);var n=i.uniq(o.layouts.map(function(e){return e.toLowerCase()}));i.each(n,function(e){return c.Assert.check(i.contains(t.validLayouts,e),"Invalid layout")}),i.isEmpty(n)||(i.each(n,function(t){return e.addButton(t)}),this.shouldShowSelector()||this.hide())},t.prototype.addButton=function(e){var t=this,o=y.$$("span",{className:"coveo-result-layout-selector"}),n=y.$$("span",{className:"coveo-result-layout-selector-caption"},d.l(e));o.append(n.el);var i=y.$$("span",{className:"coveo-icon coveo-"+e+"-layout-icon"},v.SVGIcons.icons[e+"Layout"]);f.SVGDom.addClassToSVGInContainer(i.el,"coveo-"+e+"-svg"),o.prepend(i.el);var s=function(){return t.changeLayout(e)};(new S.AccessibleButton).withElement(o).withLabel(d.l("DisplayResultsAs",d.l(e))).withSelectAction(s).withOwner(this.bind).build(),e===this.currentLayout&&o.addClass("coveo-selected"),y.$$(this.element).append(o.el),this.currentActiveLayouts[e]={button:{visible:!0,el:o.el},enabled:!0}},t.prototype.hide=function(){var e=this.resultLayoutSection||this.element;y.$$(e).addClass("coveo-result-layout-hidden")},t.prototype.show=function(){var e=this.resultLayoutSection||this.element;y.$$(e).removeClass("coveo-result-layout-hidden")},t.prototype.getModelValue=function(){return this.queryStateModel.get(h.QueryStateModel.attributesEnum.layout)},t.prototype.setModelValue=function(e){this.queryStateModel.set(h.QueryStateModel.attributesEnum.layout,e)},t.prototype.shouldShowSelector=function(){return i.keys(this.currentActiveLayouts).length>1&&i.filter(this.currentActiveLayouts,function(e){return e.button.visible}).length>1&&!this.hasNoResults},t.prototype.isLayoutDisplayedByButton=function(e){return i.contains(i.keys(this.currentActiveLayouts),e)},t.ID="ResultLayoutSelector",t.aliases=["ResultLayout"],t.doExport=function(){p.exportGlobally({ResultLayoutSelector:t,ResultLayout:t})},t.validLayouts=["list","card","table"],t.options={mobileLayouts:A.ComponentOptions.buildListOption({defaultValue:["card","table"]}),tabletLayouts:A.ComponentOptions.buildListOption({defaultValue:["list","card","table"]}),desktopLayouts:A.ComponentOptions.buildListOption({defaultValue:["list","card","table"]})},t}(L.Component);t.ResultLayoutSelector=R,C.Initialization.registerAutoCreateComponent(R)},17:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(11),i=o(30),s=o(1);o(371);var r=function(){function e(){this.logger=new n.Logger(this)}return e.prototype.withOwner=function(e){return this.eventOwner=e,this},e.prototype.withElement=function(e){return e instanceof HTMLElement?this.element=s.$$(e):this.element=e,this},e.prototype.withLabel=function(e){return this.label=e,this},e.prototype.withTitle=function(e){return this.title=e,this},e.prototype.withSelectAction=function(e){return this.clickAction=e,this.enterKeyboardAction=e,this},e.prototype.withClickAction=function(e){return this.clickAction=e,this},e.prototype.withEnterKeyboardAction=function(e){return this.enterKeyboardAction=e,this},e.prototype.withFocusAndMouseEnterAction=function(e){return this.focusAction=e,this.mouseenterAction=e,this},e.prototype.withFocusAction=function(e){return this.focusAction=e,this},e.prototype.withMouseEnterAction=function(e){return this.mouseenterAction=e,this},e.prototype.withBlurAndMouseLeaveAction=function(e){return this.mouseleaveAction=e,this.blurAction=e,this},e.prototype.withMouseLeaveAction=function(e){return this.mouseleaveAction=e,this},e.prototype.withBlurAction=function(e){return this.blurAction=e,this},e.prototype.build=function(){return this.element||(this.element=s.$$("div")),this.ensureCorrectRole(),this.ensureCorrectLabel(),this.ensureTitle(),this.ensureSelectAction(),this.ensureUnselectAction(),this.ensureMouseenterAndFocusAction(),this.ensureMouseleaveAndBlurAction(),this.ensureDifferentiationBetweenKeyboardAndMouseFocus(),this},e.prototype.ensureDifferentiationBetweenKeyboardAndMouseFocus=function(){var e=this,t="coveo-accessible-button-pressed",o="coveo-accessible-button-focused";s.$$(this.element).addClass("coveo-accessible-button"),s.$$(this.element).on("mousedown",function(){s.$$(e.element).addClass(t),s.$$(e.element).removeClass(o)}),s.$$(this.element).on("mouseup",function(){return s.$$(e.element).removeClass(t)}),s.$$(this.element).on("focus",function(){s.$$(e.element).hasClass(t)||s.$$(e.element).addClass(o)}),s.$$(this.element).on("blur",function(){return s.$$(e.element).removeClass(o)})},e.prototype.ensureCorrectRole=function(){this.element.getAttribute("role")||this.element.setAttribute("role","button")},e.prototype.ensureCorrectLabel=function(){if(!this.label)return void this.logger.error("Missing label to create an accessible button !");this.element.setAttribute("aria-label",this.label)},e.prototype.ensureTitle=function(){this.title&&this.element.setAttribute("title",this.title)},e.prototype.ensureTabIndex=function(){this.element.setAttribute("tabindex","0")},e.prototype.ensureSelectAction=function(){var e=this;this.enterKeyboardAction&&(this.ensureTabIndex(),this.bindEvent("keyup",i.KeyboardUtils.keypressAction(i.KEYBOARD.ENTER,function(t){return e.enterKeyboardAction(t)}))),this.clickAction&&this.bindEvent("click",this.clickAction)},e.prototype.ensureUnselectAction=function(){this.blurAction&&this.bindEvent("blur",this.blurAction),this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction)},e.prototype.ensureMouseenterAndFocusAction=function(){this.mouseenterAction&&this.bindEvent("mouseenter",this.mouseenterAction),this.focusAction&&this.bindEvent("focus",this.focusAction)},e.prototype.ensureMouseleaveAndBlurAction=function(){this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction),this.blurAction&&this.bindEvent("blur",this.blurAction)},e.prototype.bindEvent=function(e,t){this.eventOwner?this.eventOwner.on(this.element,e,t):s.$$(this.element).on(e,t)},e}();t.AccessibleButton=r},371:function(e,t){},474:function(e,t){},475:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),i=o(11),s=o(1),r=o(6),a=o(147),u=o(18),c=o(79),l=function(){function e(e,t,o,n){this.coveoRoot=e,this.ID=t,this.searchInterface=r.Component.get(this.coveoRoot.el,u.SearchInterface,!1)}return e.init=function(t,o,n){if(!s.$$(t).find("."+r.Component.computeCssClassName(a.ResultLayoutSelector))){return void new i.Logger("ResponsiveResultLayout").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}c.ResponsiveComponentsManager.register(e,s.$$(t),a.ResultLayoutSelector.ID,o,n)},e.prototype.registerComponent=function(e){return e instanceof a.ResultLayoutSelector&&(this.resultLayout=e,!0)},e.prototype.handleResizeEvent=function(){this.needSmallMode()?this.enableAndDisableLayouts(this.resultLayout.options.mobileLayouts):this.needMediumMode()?this.enableAndDisableLayouts(this.resultLayout.options.tabletLayouts):this.enableAndDisableLayouts(this.resultLayout.options.desktopLayouts)},e.prototype.enableAndDisableLayouts=function(e){var t=n.difference(a.ResultLayoutSelector.validLayouts,e),o=n.intersection(a.ResultLayoutSelector.validLayouts,e);this.resultLayout.disableLayouts(t),this.resultLayout.enableLayouts(o)},e.prototype.needSmallMode=function(){switch(this.searchInterface.responsiveComponents.getResponsiveMode()){case"small":return!0;case"auto":return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth();default:return!1}},e.prototype.needMediumMode=function(){switch(this.searchInterface.responsiveComponents.getResponsiveMode()){case"medium":return!0;case"auto":return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();default:return!1}},e}();t.ResponsiveResultLayout=l},79:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),i=o(16),s=o(6),r=o(18),a=o(4),u=o(0),c=o(10),l=o(11),h=o(26),p=o(0),d=function(){function e(t){var o=this;this.disabledComponents=[],this.responsiveComponents=[],this.coveoRoot=t,this.searchInterface=s.Component.get(this.coveoRoot.el,r.SearchInterface,!1),this.dropdownHeadersWrapper=n.$$("div",{className:e.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}),this.searchBoxElement=this.getSearchBoxElement(),this.logger=new l.Logger(this),this.resizeListener=p.debounce(function(){0!=o.coveoRoot.width()?(o.addDropdownHeaderWrapperIfNeeded(),o.shouldSwitchToSmallMode()?o.coveoRoot.addClass("coveo-small-interface"):o.shouldSwitchToSmallMode()||o.coveoRoot.removeClass("coveo-small-interface"),u.each(o.responsiveComponents,function(e){e.handleResizeEvent()})):o.logger.warn("The width of the search interface is 0, cannot dispatch resize events to responsive components. This means that the tabs will not\n        automatically fit in the tab section. Also, the facet and recommendation component will not hide in a menu. Could the search\n        interface display property be none? Could its visibility property be set to hidden? Also, if either of these scenarios happen during\n        loading, it could be the cause of this issue.")},250),h.DeviceUtils.isMobileDevice()||window.addEventListener("resize",this.resizeListener),this.bindNukeEvents()}return e.register=function(t,o,n,s,r){var h=this;(r.initializationEventRoot||o).on(i.InitializationEvents.afterInitialization,function(){if(h.shouldEnableResponsiveMode(o)){var i=u.find(h.componentManagers,function(e){return o.el==e.coveoRoot.el});if(i||(i=new e(o),h.componentManagers.push(i)),!a.Utils.isNullOrUndefined(r.enableResponsiveMode)&&!r.enableResponsiveMode)return void i.disableComponent(n);h.componentInitializations.push({responsiveComponentsManager:i,arguments:[t,o,n,s,r]})}if(0==--h.remainingComponentInitializations)if(h.instantiateResponsiveComponents(),0==o.width()){var p=new l.Logger("ResponsiveComponentsManager");p.info("Search interface width is 0, cannot dispatch resize events to responsive components. Will try again after first\n          query success."),o.one(c.QueryEvents.querySuccess,function(){h.resizeAllComponentsManager()})}else h.resizeAllComponentsManager()}),this.remainingComponentInitializations++},e.shouldEnableResponsiveMode=function(e){var t=s.Component.get(e.el,r.SearchInterface,!0);return t instanceof r.SearchInterface&&t.options.enableAutomaticResponsiveMode},e.instantiateResponsiveComponents=function(){u.each(this.componentInitializations,function(e){var t=e.responsiveComponentsManager;t.register.apply(t,e.arguments)})},e.resizeAllComponentsManager=function(){u.each(this.componentManagers,function(e){e.resizeListener()})},e.prototype.register=function(e,t,o,n,i){if(!this.isDisabled(o)){if(!this.isActivated(o)){var s=new e(t,o,i);this.isTabs(o)?this.responsiveComponents.push(s):this.responsiveComponents.unshift(s)}u.each(this.responsiveComponents,function(e){null!=e.registerComponent&&e.registerComponent(n)})}},e.prototype.disableComponent=function(e){this.disabledComponents.push(e)},e.prototype.isDisabled=function(e){return-1!=u.indexOf(this.disabledComponents,e)},e.prototype.shouldSwitchToSmallMode=function(){var e=this.needDropdownWrapper(),t=this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();return e||t},e.prototype.needDropdownWrapper=function(){for(var e=0;e<this.responsiveComponents.length;e++){var t=this.responsiveComponents[e];if(t.needDropdownWrapper&&t.needDropdownWrapper())return!0}return!1},e.prototype.addDropdownHeaderWrapperIfNeeded=function(){if(this.needDropdownWrapper()){var e=n.$$(this.coveoRoot).find(".coveo-tab-section");this.searchBoxElement?this.dropdownHeadersWrapper.insertAfter(this.searchBoxElement):e?this.dropdownHeadersWrapper.insertAfter(e):this.coveoRoot.prepend(this.dropdownHeadersWrapper.el)}},e.prototype.isTabs=function(e){return"Tab"==e},e.prototype.isActivated=function(e){return void 0!=u.find(this.responsiveComponents,function(t){return t.ID==e})},e.prototype.getSearchBoxElement=function(){var e=this.coveoRoot.find(".coveo-search-section");return e||this.coveoRoot.find(".CoveoSearchbox")},e.prototype.bindNukeEvents=function(){var t=this;n.$$(this.coveoRoot).on(i.InitializationEvents.nuke,function(){window.removeEventListener("resize",t.resizeListener),e.componentManagers=u.filter(e.componentManagers,function(e){return e.coveoRoot.el!=t.coveoRoot.el})})},e.DROPDOWN_HEADER_WRAPPER_CSS_CLASS="coveo-dropdown-header-wrapper",e.componentManagers=[],e.remainingComponentInitializations=0,e.componentInitializations=[],e}();t.ResponsiveComponentsManager=d}});