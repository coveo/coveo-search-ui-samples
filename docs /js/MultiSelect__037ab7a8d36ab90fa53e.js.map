{"version":3,"sources":["./src/ui/FormWidgets/MultiSelect.ts","./sass/vapor/_MultiSelect.scss"],"names":[],"mappings":"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","file":"MultiSelect__037ab7a8d36ab90fa53e.js","sourcesContent":["import { IFormWidget, IFormWidgetSettable } from './FormWidgets';\nimport { $$ } from '../../utils/Dom';\nimport * as _ from 'underscore';\nimport { l } from '../../strings/Strings';\nimport 'styling/vapor/_MultiSelect';\nimport { Utils } from '../../utils/Utils';\nimport { exportGlobally } from '../../GlobalExports';\n\n/**\n * A multi select widget with standard styling.\n */\nexport class MultiSelect implements IFormWidget, IFormWidgetSettable {\n  private element: HTMLSelectElement;\n\n  static doExport() {\n    exportGlobally({\n      MultiSelect: MultiSelect\n    });\n  }\n\n  /**\n   * Creates a new `MultiSelect`.\n   * @param onChange The function to call when the widget selected values change. This function takes the current\n   * `MultiSelect` instance as an argument.\n   * @param options The values which can be selected with the multi select.\n   * @param label The label to display for the multi select.\n   */\n  constructor(\n    public onChange: (multiSelect: MultiSelect) => void = (multiSelect: MultiSelect) => {},\n    public options: string[],\n    public label: string\n  ) {\n    this.buildContent();\n  }\n\n  /**\n   * Gets the element on which the multi select is bound.\n   * @returns {HTMLSelectElement} The multi select element.\n   */\n  public build(): HTMLElement {\n    return this.element;\n  }\n\n  /**\n   * Gets the element on which the multi select is bound.\n   * @returns {HTMLSelectElement} The multi select element.\n   */\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  /**\n   * Gets the currently selected values.\n   * @returns {string[]} The array of selected multi select values.\n   */\n  public getValue(): string[] {\n    return _.chain(<any>this.element.options)\n      .toArray()\n      .filter((opt: HTMLOptionElement) => opt.selected)\n      .map((selected: HTMLOptionElement) => selected.value)\n      .value();\n  }\n\n  /**\n   * Gets the currently un-selected values.\n   * @returns {string[]} The array of un-selected multi select values.\n   */\n  public getUnselectedValues(): string[] {\n    return _.chain(<any>this.element.options)\n      .toArray()\n      .filter((opt: HTMLOptionElement) => !opt.selected)\n      .map((selected: HTMLOptionElement) => selected.value)\n      .value();\n  }\n\n  /**\n   * Sets the currently selected values.\n   * @param values The values to select.\n   */\n  public setValue(values: string[]) {\n    const currentlySelected = this.getValue();\n\n    const currentStateSplit = _.partition(_.toArray(this.element.options), (opt: HTMLOptionElement) =>\n      _.contains(currentlySelected, opt.value)\n    );\n    const newStateToApplySplit = _.partition(_.toArray(this.element.options), (opt: HTMLOptionElement) => _.contains(values, opt.value));\n\n    _.each(newStateToApplySplit[0], (toSelect: HTMLOptionElement) => (toSelect.selected = true));\n    _.each(newStateToApplySplit[1], (toUnSelect: HTMLOptionElement) => (toUnSelect.selected = false));\n\n    let hasChanged = false;\n    if (!Utils.arrayEqual(currentStateSplit[0], newStateToApplySplit[0], false)) {\n      hasChanged = true;\n    }\n    if (!Utils.arrayEqual(currentStateSplit[1], newStateToApplySplit[1], false)) {\n      hasChanged = true;\n    }\n\n    if (hasChanged) {\n      $$(this.element).trigger('change');\n    }\n  }\n\n  /**\n   * Resets the multi select.\n   */\n  public reset() {\n    const currentlySelected = this.getValue();\n    this.element.selectedIndex = -1;\n    if (!Utils.isEmptyArray(currentlySelected)) {\n      $$(this.element).trigger('change');\n    }\n  }\n\n  private buildContent() {\n    this.element = <HTMLSelectElement>$$('select', {\n      className: 'mdc-multi-select mdl-list',\n      multiple: '',\n      size: this.options.length.toString()\n    }).el;\n    const optgroup = $$('optgroup', {\n      className: 'mdc-list-group',\n      label: this.label\n    });\n    const options = _.map(this.options, opt => {\n      return $$('option', { value: opt, className: 'mdc-list-item' }, l(opt));\n    });\n    _.each(options, opt => optgroup.append(opt.el));\n    this.element.appendChild(optgroup.el);\n    $$(this.element).on('change', () => this.onChange(this));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FormWidgets/MultiSelect.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/vapor/_MultiSelect.scss\n// module id = 401\n// module chunks = 18 59 78"],"sourceRoot":""}