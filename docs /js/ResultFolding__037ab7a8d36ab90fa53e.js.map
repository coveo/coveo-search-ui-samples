{"version":3,"sources":["./src/utils/SVGDom.ts","./src/ui/ResultFolding/ResultFolding.ts","./src/ui/ResultFolding/DefaultFoldingTemplate.ts","./sass/_ResultFolding.scss"],"names":[],"mappings":"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","file":"ResultFolding__037ab7a8d36ab90fa53e.js","sourcesContent":["import { IStringMap } from '../rest/GenericParam';\nimport * as _ from 'underscore';\n\nexport class SVGDom {\n  public static addClassToSVGInContainer(svgContainer: HTMLElement, classToAdd: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', `${SVGDom.getClass(svgElement)}${classToAdd}`);\n  }\n\n  public static removeClassFromSVGInContainer(svgContainer: HTMLElement, classToRemove: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', SVGDom.getClass(svgElement).replace(classToRemove, ''));\n  }\n\n  public static addStyleToSVGInContainer(svgContainer: HTMLElement, styleToAdd: IStringMap<any>) {\n    const svgElement = svgContainer.querySelector('svg');\n    _.each(styleToAdd, (styleValue, styleKey) => {\n      svgElement.style[styleKey] = styleValue;\n    });\n  }\n\n  private static getClass(svgElement: SVGElement) {\n    const className = svgElement.getAttribute('class');\n    return className ? className + ' ' : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SVGDom.ts","import { Template } from '../Templates/Template';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { DefaultFoldingTemplate } from './DefaultFoldingTemplate';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Utils } from '../../utils/Utils';\nimport { QueryUtils } from '../../utils/QueryUtils';\nimport { Initialization } from '../Base/Initialization';\nimport { Assert } from '../../misc/Assert';\nimport { $$, Win } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport { each, map } from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\nimport { analyticsActionCauseList, IAnalyticsDocumentViewMeta } from '../Analytics/AnalyticsActionListMeta';\nimport { Logger } from '../../misc/Logger';\n\nimport 'styling/_ResultFolding';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { SVGDom } from '../../utils/SVGDom';\nimport { TemplateComponentOptions } from '../Base/TemplateComponentOptions';\n\nexport interface IResultFoldingOptions {\n  resultTemplate?: Template;\n  normalCaption?: string;\n  expandedCaption?: string;\n  moreCaption?: string;\n  lessCaption?: string;\n  oneResultCaption?: string;\n}\n\n/**\n * The `ResultFolding` component renders folded result sets. It is usable inside a result template when there is an\n * active [`Folding`]{@link Folding} component in the page. This component takes care of rendering the parent result and\n * its child results in a coherent manner.\n *\n * This component is a result template component (see [Result Templates](https://developers.coveo.com/x/aIGfAQ)).\n *\n * See [Folding Results](https://developers.coveo.com/x/7hUvAg).\n */\nexport class ResultFolding extends Component {\n  static ID = 'ResultFolding';\n\n  static doExport = () => {\n    exportGlobally({\n      ResultFolding: ResultFolding,\n      DefaultFoldingTemplate: DefaultFoldingTemplate\n    });\n  };\n\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IResultFoldingOptions = {\n    /**\n     * Specifies the template to use to render each of the child results for a top result.\n     *\n     * You can specify a previously registered template to use either by referring to its HTML `id` attribute or to a\n     * CSS selector (see {@link TemplateCache}).\n     *\n     * **Example:**\n     *\n     * Specifying a previously registered template by referring to its HTML `id` attribute:\n     *\n     * ```html\n     * <span class=\"CoveoResultFolding\" data-result-template-id=\"Foo\"></span>\n     * ```\n     *\n     * Specifying a previously registered template by referring to a CSS selector:\n     *\n     * ```html\n     * <span class='CoveoResultFolding' data-result-template-selector=\"#Foo\"></span>\n     * ```\n     *\n     * If you do not specify a custom folding template, the component uses the default result folding template.\n     */\n    resultTemplate: TemplateComponentOptions.buildTemplateOption({ defaultFunction: () => new DefaultFoldingTemplate() }),\n\n    /**\n     * Specifies the caption to display at the top of the child results when the folding result set is not expanded.\n     *\n     * Default value is `undefined`, which displays no caption.\n     */\n    normalCaption: ComponentOptions.buildLocalizedStringOption(),\n\n    /**\n     * Specifies the caption to display at the top of the child results when the folding result set is expanded.\n     *\n     * Default value is `undefined`, which displays no caption.\n     */\n    expandedCaption: ComponentOptions.buildLocalizedStringOption(),\n\n    /**\n     * Specifies the caption to display on the link to expand / show child results.\n     *\n     * Default value is the localized string for `ShowMore`.\n     */\n    moreCaption: ComponentOptions.buildLocalizedStringOption({ postProcessing: value => value || l('ShowMore') }),\n\n    /**\n     * Specifies the caption to display on the link to shrink the loaded folding result set back to only the top result.\n     *\n     * Default value is the localized string for `ShowLess`.\n     */\n    lessCaption: ComponentOptions.buildLocalizedStringOption({ postProcessing: value => value || l('ShowLess') }),\n\n    /**\n     * Specifies the caption to display when there is only one result in a folding result set.\n     *\n     * Default value is the localized string for `DisplayingTheOnlyMessage`\n     */\n    oneResultCaption: ComponentOptions.buildLocalizedStringOption({\n      postProcessing: value => value || l('DisplayingTheOnlyMessage')\n    })\n  };\n\n  private normalCaption: HTMLElement;\n  private expandedCaption: HTMLElement;\n  private oneResultCaption: HTMLElement;\n  private results: HTMLElement;\n  private showMore: HTMLElement;\n  private showLess: HTMLElement;\n  private waitAnimation: HTMLElement;\n  private moreResultsPromise: Promise<IQueryResult[]>;\n  private showingMoreResults = false;\n\n  public childResults: IQueryResult[];\n\n  /**\n   * Creates a new ResultFolding component.\n   * @param options The options for the ResultFolding component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(\n    public element: HTMLElement,\n    public options?: IResultFoldingOptions,\n    bindings?: IComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, ResultFolding.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(this.element, ResultFolding, options);\n\n    Assert.exists(result);\n\n    this.buildElements();\n    this.renderElements();\n  }\n\n  /**\n   * Show more results by fetching additional results from the index, which match the current folded conversation.\n   * This is the equivalent of clicking \"Show all conversation\".\n   * @returns {Promise<IQueryResult[]>}\n   */\n  public async showMoreResults() {\n    Assert.exists(this.result.moreResults);\n\n    this.cancelAnyPendingShowMore();\n    this.moreResultsPromise = this.result.moreResults();\n    this.waitAnimation = $$('div', { className: 'coveo-loading-spinner' }).el;\n    this.results.appendChild(this.waitAnimation);\n    this.updateElementVisibility();\n\n    const results = await this.moreResultsPromise;\n    this.childResults = results;\n    this.showingMoreResults = true;\n    this.usageAnalytics.logClickEvent<IAnalyticsDocumentViewMeta>(\n      analyticsActionCauseList.foldingShowMore,\n      this.getAnalyticsMetadata(),\n      this.result,\n      this.element\n    );\n\n    try {\n      await this.displayThoseResults(results);\n      this.updateElementVisibility(results.length);\n    } catch (e) {\n      const logger = new Logger(this);\n      logger.warn('An error occured when trying to display more results');\n    }\n\n    this.moreResultsPromise = undefined;\n    $$(this.waitAnimation).detach();\n    this.waitAnimation = undefined;\n\n    return results;\n  }\n\n  /**\n   * Show less results for a given conversation. This is the equivalent of clicking \"Show less\"\n   */\n  public async showLessResults() {\n    this.cancelAnyPendingShowMore();\n    this.showingMoreResults = false;\n    this.usageAnalytics.logCustomEvent<IAnalyticsDocumentViewMeta>(\n      analyticsActionCauseList.foldingShowLess,\n      this.getAnalyticsMetadata(),\n      this.element\n    );\n    await this.displayThoseResults(this.result.childResults);\n    this.updateElementVisibility();\n    this.scrollToResultElement();\n  }\n\n  private buildElements() {\n    this.buildHeader();\n    this.buildResults();\n    this.buildFooter();\n  }\n\n  private async renderElements() {\n    await this.displayThoseResults(this.result.childResults);\n    this.updateElementVisibility();\n\n    if ($$(this.element.parentElement).hasClass('CoveoCardOverlay')) {\n      this.bindOverlayEvents();\n    }\n\n    if (this.result.childResults.length == 0 && !this.result.moreResults) {\n      $$(this.element).hide();\n    }\n  }\n\n  private buildHeader() {\n    let header = $$('div', { className: 'coveo-folding-header' }).el;\n    this.element.appendChild(header);\n    if (this.options.normalCaption != undefined && this.options.expandedCaption != undefined) {\n      this.normalCaption = $$('div', { className: 'coveo-folding-normal-caption' }, this.options.normalCaption).el;\n      header.appendChild(this.normalCaption);\n\n      this.expandedCaption = $$('div', { className: 'coveo-folding-expanded-caption' }, this.options.expandedCaption).el;\n      header.appendChild(this.expandedCaption);\n    }\n    this.oneResultCaption = $$('div', { className: 'coveo-folding-oneresult-caption' }, this.options.oneResultCaption).el;\n    header.appendChild(this.oneResultCaption);\n  }\n\n  private buildResults() {\n    this.results = $$('div', { className: 'coveo-folding-results' }).el;\n    this.element.appendChild(this.results);\n  }\n\n  private buildFooter() {\n    let footer = $$('div', { className: 'coveo-folding-footer' }).el;\n    this.element.parentElement.appendChild(footer);\n\n    if (this.result.moreResults) {\n      this.showMore = $$('div', { className: 'coveo-folding-footer-section-for-less' }).el;\n      $$(this.showMore).on('click', () => this.showMoreResults());\n      footer.appendChild(this.showMore);\n\n      this.showLess = $$('div', { className: 'coveo-folding-footer-section-for-more' }).el;\n      $$(this.showLess).on('click', () => this.showLessResults());\n      footer.appendChild(this.showLess);\n\n      let footerIconShowMore = $$(\n        'div',\n        { className: 'coveo-folding-more' },\n        $$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons.icons.arrowDown).el\n      ).el;\n      SVGDom.addClassToSVGInContainer(footerIconShowMore, 'coveo-folding-more-svg');\n      let footerIconShowLess = $$(\n        'div',\n        { className: 'coveo-folding-less' },\n        $$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons.icons.arrowUp).el\n      ).el;\n      SVGDom.addClassToSVGInContainer(footerIconShowLess, 'coveo-folding-less-svg');\n      let showMoreLink = $$('a', { className: 'coveo-folding-show-more' }, this.options.moreCaption).el;\n      let showLessLink = $$('a', { className: 'coveo-folding-show-less' }, this.options.lessCaption).el;\n      this.showMore.appendChild(showMoreLink);\n      this.showLess.appendChild(showLessLink);\n      this.showMore.appendChild(footerIconShowMore);\n      this.showLess.appendChild(footerIconShowLess);\n    }\n  }\n\n  private updateElementVisibility(subResultsLength?: number) {\n    if (this.normalCaption) {\n      $$(this.normalCaption).toggle(!this.showingMoreResults && this.result.childResults.length > 0);\n    }\n    if (this.expandedCaption) {\n      $$(this.expandedCaption).toggle(this.showingMoreResults);\n    }\n    $$(this.oneResultCaption).toggleClass('coveo-hidden', !(subResultsLength && subResultsLength == 1));\n\n    if (this.showMore) {\n      $$(this.showMore).toggle(!this.showingMoreResults && !Utils.exists(this.moreResultsPromise));\n      $$(this.showLess).toggle(this.showingMoreResults);\n    }\n\n    let showIfNormal = $$(this.element).find('.coveo-show-if-normal');\n    if (showIfNormal) {\n      $$(showIfNormal).toggle(!this.showingMoreResults);\n    }\n\n    let showIfExpanded = $$(this.element).find('.coveo-show-if-expanded');\n    if (showIfExpanded) {\n      $$(showIfExpanded).toggle(this.showingMoreResults);\n    }\n  }\n\n  private scrollToResultElement() {\n    let resultElem = $$(this.element).closest('CoveoResult');\n    window.scrollTo(0, new Win(window).scrollY() + resultElem.getBoundingClientRect().top);\n  }\n\n  private async displayThoseResults(results: IQueryResult[]): Promise<boolean> {\n    const childResultsPromises = map(results, result => {\n      return this.renderChildResult(result);\n    });\n\n    const childsToAppend: HTMLElement[] = await Promise.all(childResultsPromises);\n    $$(this.results).empty();\n    each(childsToAppend, oneChild => {\n      this.results.appendChild(oneChild);\n    });\n    return true;\n  }\n\n  private async renderChildResult(childResult: IQueryResult): Promise<HTMLElement> {\n    QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(), childResult);\n    QueryUtils.setSearchInterfaceObjectOnQueryResult(this.searchInterface, childResult);\n\n    const oneChild: HTMLElement = await this.options.resultTemplate.instantiateToElement(childResult, {\n      wrapInDiv: false,\n      checkCondition: false,\n      responsiveComponents: this.searchInterface.responsiveComponents\n    });\n\n    $$(oneChild).addClass('coveo-result-folding-child-result');\n    $$(oneChild).toggleClass('coveo-normal-child-result', !this.showingMoreResults);\n    $$(oneChild).toggleClass('coveo-expanded-child-result', this.showingMoreResults);\n\n    await Initialization.automaticallyCreateComponentsInsideResult(oneChild, childResult).initResult;\n    return oneChild;\n  }\n\n  private cancelAnyPendingShowMore() {\n    if (this.moreResultsPromise) {\n      this.moreResultsPromise = undefined;\n    }\n\n    Assert.doesNotExists(this.moreResultsPromise);\n    Assert.doesNotExists(this.waitAnimation);\n  }\n\n  private bindOverlayEvents() {\n    this.bind.one(this.element.parentElement, 'openCardOverlay', () => {\n      if (this.result.moreResults) {\n        this.showMoreResults();\n      }\n    });\n  }\n\n  private getAnalyticsMetadata(): IAnalyticsDocumentViewMeta {\n    return {\n      documentURL: this.result.clickUri,\n      documentTitle: this.result.title,\n      author: Utils.getFieldValue(this.result, 'author')\n    };\n  }\n}\n\nInitialization.registerAutoCreateComponent(ResultFolding);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultFolding/ResultFolding.ts","import { Template } from '../Templates/Template';\nimport { IQueryResult } from '../../rest/QueryResult';\n\nexport class DefaultFoldingTemplate extends Template {\n  constructor() {\n    super();\n  }\n\n  instantiateToString(queryResult?: IQueryResult): string {\n    return '<div class=\"coveo-child-result\"><span class=\"CoveoIcon\" data-small=\"true\"></span> <a class=\"CoveoResultLink\"></a> <span class=\"CoveoQuickview\"></span></div>';\n  }\n\n  getType() {\n    return 'DefaultFoldingTemplate';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultFolding/DefaultFoldingTemplate.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultFolding.scss\n// module id = 473\n// module chunks = 34 78"],"sourceRoot":""}